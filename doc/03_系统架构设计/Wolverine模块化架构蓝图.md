# Wolverine 模块化架构蓝图（导航）

> **重要提示**: 本文档已重构为多个聚焦文档，便于查阅和维护。
> 
> **完整内容**: 请访问 [架构规划目录](./架构规划/README.md) 查看所有拆分文档。

---

## 📢 文档重构说明

**背景**: 原文档 1115 行 (29KB)，内容过多，难以快速定位和维护。

**解决方案**: 拆分为 6 个聚焦文档 + 1 个总览文档，按主题组织：

| 文档 | 内容概要 | 阅读时间 |
|------|---------|---------|
| [架构规划总览](./架构规划/README.md) | 统一入口，快速导航 | 10分钟 |
| [01_核心架构原则](./架构规划/01_核心架构原则.md) | 垂直切片、Handler、约束 | 30分钟 |
| [02_解决方案结构设计](./架构规划/02_解决方案结构设计.md) | Solution 结构、模块拆分 | 30分钟 |
| [03_模块设计指南](./架构规划/03_模块设计指南.md) | 单个模块结构、Slice 模板 | 45分钟 |
| [04_Saga工作流设计](./架构规划/04_Saga工作流设计.md) | Saga 使用场景与实现 | 30分钟 |
| [05_跨模块通信指南](./架构规划/05_跨模块通信指南.md) | 同步/异步通信、反模式 | 30分钟 |
| [06_实战建议与最佳实践](./架构规划/06_实战建议与最佳实践.md) | 经验总结、常见错误 | 30分钟 |

**迁移状态**: ✅ 已完成

---

## 🎯 快速跳转

### 我想了解...

**核心理念**:
- [为什么选择垂直切片而非分层？](./架构规划/01_核心架构原则.md#原则-1-100-垂直切片vertical-slice)
- [Handler 为什么是 Application Service？](./架构规划/01_核心架构原则.md#原则-4-handler-就是-application-service)
- [模块边界如何划分？](./架构规划/02_解决方案结构设计.md#22-modules)

**实现指南**:
- [如何实现一个完整的 Slice？](./架构规划/03_模块设计指南.md#二完整-slice-的标准形态)
- [Command/Handler/Endpoint 代码模板](./架构规划/03_模块设计指南.md#21-command-定义)
- [聚合根如何设计？](./架构规划/03_模块设计指南.md#三聚合根设计)

**跨模块通信**:
- [何时使用同步 vs. 异步通信？](./架构规划/05_跨模块通信指南.md#一通信方式选择)
- [如何实现跨模块调用？](./架构规划/05_跨模块通信指南.md#二同步通信command-bus)
- [为什么不能创建 Shared Service？](./架构规划/05_跨模块通信指南.md#四反模式共享服务层)

**长流程编排**:
- [何时使用 Saga？](./架构规划/04_Saga工作流设计.md#一何时使用-saga)
- [Saga 如何实现？](./架构规划/04_Saga工作流设计.md#二saga-实现示例)
- [超时和补偿如何处理？](./架构规划/04_Saga工作流设计.md#四超时处理)

**最佳实践**:
- [如何避免过早抽象？](./架构规划/06_实战建议与最佳实践.md#二不要重复洁癖)
- [Handler 复杂度过高怎么办？](./架构规划/06_实战建议与最佳实践.md#四handler-复杂度信号)
- [常见错误与解决方案](./架构规划/06_实战建议与最佳实践.md#七常见错误与解决)

---

## 📚 原始内容映射

为方便查找，以下是原文档各章节对应的新文档位置：

| 原章节 | 新文档位置 |
|--------|----------|
| 一、总体架构立场 | [01_核心架构原则](./架构规划/01_核心架构原则.md) |
| 二、解决方案级 Blueprint | [02_解决方案结构设计](./架构规划/02_解决方案结构设计.md) |
| 三、单个模块的"黄金结构" | [03_模块设计指南](./架构规划/03_模块设计指南.md) - 第一节 |
| 四、完整 Slice 的标准形态 | [03_模块设计指南](./架构规划/03_模块设计指南.md) - 第二节 |
| 五、Saga（跨步骤业务流程） | [04_Saga工作流设计](./架构规划/04_Saga工作流设计.md) |
| 六、跨模块通信（底线规则） | [05_跨模块通信指南](./架构规划/05_跨模块通信指南.md) |
| 七、项目现实映射（自助台球系统） | [02_解决方案结构设计](./架构规划/02_解决方案结构设计.md) - 第三节 |
| 八、硬核实践建议 | [06_实战建议与最佳实践](./架构规划/06_实战建议与最佳实践.md) |
| 九、Bootstrapper 配置示例 | [02_解决方案结构设计](./架构规划/02_解决方案结构设计.md) - 第五节 |
| 十、FAQ | [架构规划总览](./架构规划/README.md) - 常见问题 |
| 十一、参考资源 | 各文档末尾 |

---

## 🚀 推荐阅读路径

### 新成员入职（3-4 小时）

1. **[架构规划总览](./架构规划/README.md)** (10分钟)  
   了解整体结构和导航

2. **[01_核心架构原则](./架构规划/01_核心架构原则.md)** (30分钟)  
   理解 Wolverine 架构的核心理念

3. **[Wolverine快速上手指南](./Wolverine快速上手指南.md)** (2小时)  
   动手实践，实现第一个功能

4. **[03_模块设计指南](./架构规划/03_模块设计指南.md)** (45分钟)  
   学习标准的模块和 Slice 结构

### 架构师/Tech Lead（1周）

1. 完整阅读 [架构规划目录](./架构规划/) 下的所有文档
2. 深入理解 [设计原则](./设计原则.md) 和 [系统模块划分](./系统模块划分.md)
3. 参考 [技术选型](./技术选型.md) 了解技术决策背景
4. 阅读 Wolverine 和 Marten 官方文档

---

## 📖 核心观点摘要

> **定位**: 可直接落地、非 PPT 架构的实战型 Wolverine 模块化规划
> 
> **适用场景**: 自助台球系统等业务能力清晰的中小型应用
>
> **核心观点**: Wolverine ≠ MediatR 替代品。它是 HTTP + Command Bus + Message Bus + Workflow 引擎的融合体

### 四大核心原则

1. **100% 垂直切片（Vertical Slice）**
   - ❌ 不要 Application/Domain/Infrastructure 分层
   - ✅ 按业务能力组织代码

2. **一个 Use Case = 一个文件夹**
   - Command + Handler + Endpoint + Validator + Event 放在一起
   - 代码聚合度 > 复用洁癖

3. **通信方式分离**
   - 同步外部请求 → HTTP Endpoint
   - 内部业务编排 → Command Bus
   - 跨服务异步 → Message Queue

4. **Handler 就是 Application Service**
   - 不再需要传统 Service 层
   - 自动事务、自动 Outbox、自动依赖注入

**详见**: [01_核心架构原则](./架构规划/01_核心架构原则.md)

---

## 🔗 相关文档

- [架构规划总览](./架构规划/README.md) ⭐⭐⭐ - 统一入口
- [Wolverine快速上手指南](./Wolverine快速上手指南.md) ⭐⭐⭐ - 15分钟上手
- [系统模块划分](./系统模块划分.md) - 6大核心模块
- [垂直切片架构说明](./垂直切片架构说明.md) - 架构理念
- [设计原则](./设计原则.md) - CQRS、DDD Light

---

## 版本历史

| 版本 | 日期 | 变更说明 |
|------|------|----------|
| 2.0.0 | 2024-01-15 | 重构为导航文档，内容拆分到架构规划目录 |
| 1.0.0 | 2024-01-15 | 初始版本，完整蓝图 |

---

**最后更新**: 2024-01-15  
**负责人**: 架构团队  
**审核状态**: ✅ 已审核
