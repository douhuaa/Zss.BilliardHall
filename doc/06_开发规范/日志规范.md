# 日志规范

## 1. 敏感信息脱敏

### 1.1 手机号脱敏

为保护用户隐私，避免安全审计风险，**必须**对日志中的手机号进行脱敏处理。

#### 脱敏规则
- **保留位数**：保留后4位，前面用星号（`*`）替换
- **工具类**：使用 `PhoneMasker.Mask(phone)` 方法
- **示例**：`13800138000` → `*******8000`

#### 使用示例

```csharp
using Zss.BilliardHall.BuildingBlocks.Contracts;

logger.LogInformation(
    "会员注册成功: {MemberId}, 手机号: {MaskedPhone}",
    memberId,
    PhoneMasker.Mask(phone)  // ✅ 正确：使用脱敏工具
);

// ❌ 错误：直接记录完整手机号
logger.LogInformation("会员注册成功: {MemberId}, 手机号: {Phone}", memberId, phone);
```

#### 自定义保留位数

如需自定义保留位数，使用 `PhoneMasker.Mask(phone, keepLastDigits)` 方法：

```csharp
// 保留后2位
var masked = PhoneMasker.Mask("13800138000", 2); // *********00

// 保留后6位
var masked = PhoneMasker.Mask("13800138000", 6); // *****138000
```

### 1.2 其他敏感信息

以下信息**禁止**记录到日志：
- 密码（明文或密文）
- API Secret / Token（完整值）
- 银行卡号（完整值）
- 身份证号（完整值）
- 用户详细地址

## 2. 结构化日志

TODO: Serilog 字段设计、日志级别约定。

