# Pull Request

## 变更描述

请简要描述本 PR 的变更内容和目的。

## 变更类型

请勾选适用的变更类型：

- [ ] 🐛 Bug 修复
- [ ] ✨ 新功能
- [ ] 📝 文档更新
- [ ] 🎨 代码格式化/重构
- [ ] ⚡️ 性能优化
- [ ] ✅ 测试添加/修改
- [ ] 🔧 配置变更
- [ ] 🏗️ 架构变更

---

## 🤖 Copilot 参与检查清单

**所有 PR 必须完成 Copilot 参与环节**

根据 [Copilot 治理体系](../docs/copilot/README.md)，Copilot 是本项目的架构守护者。在提交 PR 前，请确保：

- [ ] 已使用 Copilot 审查本 PR 的架构合规性
- [ ] Copilot 未发现架构违规问题（或已按建议修复）
- [ ] 如果 Copilot 提出建议，已评估并采纳合理建议

### Copilot Review 记录

> 💡 **提示**：请将以下内容粘贴给 Copilot：
> "请基于 ADR-0001 至 ADR-0005 审查本 PR 的变更，检查是否存在架构违规。"

请记录 Copilot 的主要反馈（如果有）：

```
[粘贴 Copilot 的主要建议或确认无违规的回复]
```

### Copilot 建议处理

如果 Copilot 提出了建议：

- [ ] 已采纳所有合理建议
- [ ] 对于未采纳的建议，已在下方说明原因

未采纳原因（如适用）：

```
[说明为什么某些建议未被采纳]
```

---

## ⚠️ 架构违规声明（ARCH-VIOLATION）

**所有 PR 必须完成此部分声明**

### 架构测试状态

- [ ] 本 PR 通过了所有架构测试（`dotnet test src/tests/ArchitectureTests`）
- [ ] 本 PR 引入了架构破例（需要下方详细说明）

> 💡 **提示**：如果架构测试失败，可以将失败日志复制给 Copilot，询问：
> "请根据以下架构测试失败日志，解释违规原因并提供修复建议"
> 
> 详见：[架构测试失败解释指南](../docs/copilot/architecture-test-failures.md)

### 架构破例详情

> ⚠️ **如果勾选了"引入架构破例"，必须填写以下内容，否则 PR 将被拒绝**

#### 违反的 ADR 规则

请列出违反的 ADR 编号和具体规则：

- ADR-XXXX: [规则描述]

#### 破例理由

请详细说明为什么必须破例，以及评估过的其他方案：

```
[请在此处详细说明破例理由]

已评估的替代方案：
1. [方案 1] - 不可行的原因：...
2. [方案 2] - 不可行的原因：...
```

#### 影响范围

请说明此破例的影响范围：

- 影响模块：
- 影响文件：
- 预期影响时长：[ ] 临时（< 1 个月）/ [ ] 短期（1-3 个月）/ [ ] 长期（> 3 个月）

#### 归还计划

> 临时和短期破例必须提供归还计划

```
[请说明如何在未来消除此破例]

计划归还时间：YYYY-MM-DD
负责人：@username
```

#### 架构师审批

- [ ] 已获得架构师 @架构师名称 的口头/书面批准
- [ ] 已在架构会议上讨论并批准（会议日期：YYYY-MM-DD）

---

## 测试检查清单

- [ ] 已运行并通过架构测试：`dotnet test src/tests/ArchitectureTests`
- [ ] 已添加必要的单元测试
- [ ] 已在本地验证功能正常工作
- [ ] 测试覆盖率未下降

## 📚 文档更新检查清单

### 基础检查
- [ ] 已识别受影响的文档
- [ ] 已更新所有相关文档
- [ ] 已验证文档中的代码示例可运行
- [ ] 已检查并修复断裂的链接

### 内容检查
- [ ] 新功能已添加到相关指南
- [ ] 重大变更已更新 ADR（如需要）
- [ ] 已更新版本号和日期
- [ ] 已检查术语一致性

### 导航检查
- [ ] 新文档已添加到 `docs/index.md`（如适用）
- [ ] 相关 README 已更新链接（如适用）
- [ ] 交叉引用已双向链接（如适用）

### 特殊情况
- [ ] 如移动/重命名文件，已更新所有引用
- [ ] 如废弃功能，已标记相关文档为"已废弃"
- [ ] 如架构变更，已咨询架构师确认文档准确性

> 💡 详见 [文档维护指南](../docs/DOCUMENTATION-MAINTENANCE.md)

## 依赖变更

- [ ] 本 PR 无依赖变更
- [ ] 本 PR 新增了依赖包（请在下方列出）

### 新增依赖

如有新增依赖，请列出包名、版本和用途：

| 包名 | 版本 | 用途 | 是否已通过安全扫描 |
|------|------|------|------------------|
| | | | [ ] 是 / [ ] 否 |

---

## 审查要点

请提醒审查者关注的重点：

- [ ] 关注点 1
- [ ] 关注点 2

## 相关 Issue

关联的 Issue 编号：#

---

## 自检清单（PR 提交前必须完成）

- [ ] 代码符合项目编码规范
- [ ] 没有遗留 TODO、FIXME、console.log 等调试代码
- [ ] 提交信息清晰且符合规范
- [ ] 已完成本地自测
- [ ] 已完成架构违规声明部分
- [ ] 如有架构破例，已获得必要的审批

---

## 附加说明

其他需要说明的内容：

---

**⚠️ 重要提示**：

1. **架构测试失败但声明"无违规"**：PR 将被自动拒绝
2. **引入架构破例但未填写详情**：PR 将被自动拒绝
3. **长期破例未提供归还计划**：需要在架构会议上讨论
4. **所有破例将被记录在 [`docs/summaries/governance/arch-violations.md`](../docs/summaries/governance/arch-violations.md) 中以备审计**
