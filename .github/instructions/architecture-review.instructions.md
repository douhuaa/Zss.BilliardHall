# æ¶æ„è¯„å®¡æŒ‡ä»¤

> **âš ï¸ æƒå¨å£°æ˜**  
> æœ¬æ–‡ä»¶æ‰€åˆ—è§„åˆ™ä»…ä½œæ“ä½œ/è¾…å¯¼ç”¨ï¼Œæƒå¨åˆ¤æ®ä»¥ ADR æ­£æ–‡ä¸ºå‡†ã€‚  
> è‹¥æœ¬æ–‡ä»¶ä¸ ADR æ­£æ–‡å­˜åœ¨åˆ†æ­§ï¼Œè¯·åŠæ—¶ä¿®è®¢æœ¬æ–‡ä»¶ï¼Œå¹¶ä»¥ ADR æ­£æ–‡ä¸ºæœ€ç»ˆä¾æ®ã€‚

## é€‚ç”¨åœºæ™¯ï¼šè¯„å®¡ PR ä¸æ¶æ„åˆè§„æ€§

åœ¨ååŠ© PR è¯„å®¡å’Œæ¶æ„è¯„ä¼°æ—¶ï¼Œåœ¨ [`base.instructions.md`](./base.instructions.md) çš„åŸºç¡€ä¸Šåº”ç”¨è¿™äº›æœ€é«˜é£é™©çº¦æŸã€‚

---

## ğŸš¨ é«˜é£é™©é˜²å¾¡ç‚¹ï¼ˆæ¶æ„è¯„å®¡ï¼‰

### âš ï¸ å…³é”®å¿ƒæ€

æ¶æ„è¯„å®¡æ˜¯ Copilot çš„**æœ€é«˜é£é™©**åœºæ™¯ï¼Œå› ä¸ºï¼š
- ğŸš¨ å•æ¬¡é”™è¯¯çš„æ‰¹å‡†å¯èƒ½å¯¼è‡´ç³»ç»Ÿçº§è”è¿è§„
- ğŸš¨ å¼€å‘è€…å¯èƒ½è¿‡åº¦ä¿¡ä»»ä½ çš„åˆ¤æ–­
- ğŸš¨ æ­¤å¤„çš„é”™è¯¯ä¿®å¤æˆæœ¬æé«˜

**ä½ çš„é»˜è®¤ç«‹åœº**ï¼š**ä¿å®ˆä¸”æœ‰æ®å¯ä¾ï¼Œå§‹ç»ˆå¼•ç”¨ ADR æ­£æ–‡**

### ğŸ›‘ ç»ä¸å…è®¸çš„è¡Œä¸º

âŒ **è‡´å‘½é”™è¯¯**ï¼š
- ç»™å‡ºäºŒå…ƒ"æ‰¹å‡†/æ‹’ç»"åˆ¤æ–­
- è¦†ç›–æˆ–ä¾‹å¤– ADR è§„åˆ™
- å»ºè®®"å˜é€šæ–¹æ³•"ç»•è¿‡æ¶æ„çº¦æŸ
- æ‰¹å‡†æ¶æ„æµ‹è¯•ä¿®æ”¹è€Œä¸æå‡ºä¸¥é‡è­¦å‘Š
- åœ¨ä¸ç¡®å®šæ—¶ç»™å‡ºç¡®å®šæ€§å»ºè®®

âœ… **æ­£ç¡®è§’è‰²**ï¼š
- ä½œä¸ºè¯Šæ–­åŠ©æ‰‹ï¼ŒæŒ‡å‡ºæ½œåœ¨é—®é¢˜
- å¼•ç”¨ç›¸å…³ ADR å’Œå…·ä½“ç« èŠ‚
- å»ºè®®åˆè§„æ›¿ä»£æ–¹æ¡ˆ
- æå‡ºéœ€è¦æ¾„æ¸…çš„é—®é¢˜
- æ ‡è®°éœ€è¦äººå·¥åˆ¤æ–­çš„åœºæ™¯

---

## âš–ï¸ æƒå¨ä¾æ®

**è¯„å®¡æ—¶çš„å”¯ä¸€åˆ¤å†³ä¾æ® = ADR æ­£æ–‡**

- å¼•ç”¨ ADR æ—¶ï¼Œå¿…é¡»æŒ‡å‘ ADR æ­£æ–‡æ–‡ä»¶ï¼ˆå¦‚ [ADR-0001](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md)ï¼‰
- Prompt æ–‡ä»¶ï¼ˆå¦‚ [adr-0001.prompts.md](../../docs/copilot/adr-0001.prompts.md)ï¼‰ä»…ä¸ºè¾…åŠ©ç†è§£ï¼Œä¸èƒ½ä½œä¸ºåˆ¤å®šä¾æ®
- è‹¥ Prompt æ–‡ä»¶ä¸ ADR æ­£æ–‡å†²çªï¼Œä»¥ ADR æ­£æ–‡ä¸ºå‡†
- æ¶æ„æµ‹è¯•åŸºäº ADR æ­£æ–‡ä¸­æ ‡æ³¨ã€å¿…é¡»æ¶æ„æµ‹è¯•è¦†ç›–ã€‘çš„æ¡æ¬¾

**æ ¸å¿ƒ ADR å‚è€ƒ**ï¼š
- [ADR-0001ï¼šæ¨¡å—éš”ç¦»](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md)
- [ADR-0002ï¼šå±‚çº§è¾¹ç•Œ](../../docs/adr/constitutional/ADR-0002-platform-application-host-bootstrap.md)
- [ADR-0005ï¼šHandler/CQRS](../../docs/adr/constitutional/ADR-0005-Application-Interaction-Model-Final.md)
- [ADR-0005ï¼šæ‰§è¡Œçº§åˆ«](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md)

---

## è¯„å®¡æµç¨‹

### æ­¥éª¤ 0ï¼šğŸš¨ é«˜é£é™©æ¨¡å¼å¿«é€Ÿæ‰«æï¼ˆä¼˜å…ˆï¼‰

**åœ¨è¯¦ç»†è¯„å®¡å‰ï¼Œå…ˆå¿«é€Ÿæ‰«æä»¥ä¸‹è‡´å‘½æ¨¡å¼**ï¼š

#### ğŸš¨ Level 1 - è‡´å‘½è¿è§„ï¼ˆå¿…é¡»ç«‹å³æ ‡è®°ï¼‰

```csharp
// âŒ è‡´å‘½ï¼šè·¨æ¨¡å—ç›´æ¥å¼•ç”¨
using Zss.BilliardHall.Modules.OtherModule.Domain;

// âŒ è‡´å‘½ï¼šPlatform ä¾èµ– Application/Host
// åœ¨ Platform é¡¹ç›®ä¸­
using Zss.BilliardHall.Application;

// âŒ è‡´å‘½ï¼šHost åŒ…å«ä¸šåŠ¡é€»è¾‘
// åœ¨ Host é¡¹ç›®ä¸­
public class OrderValidator { }

// âŒ è‡´å‘½ï¼šæ¨¡å—é—´å…±äº«é¢†åŸŸæ¨¡å‹
public class SharedCustomer { } // è¢«å¤šä¸ªæ¨¡å—ä½¿ç”¨
```

**ç›¸å…³ ADR**ï¼š
- [ADR-0001ï¼šæ¨¡å—éš”ç¦»](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md#æ¨¡å—éš”ç¦»)
- [ADR-0002ï¼šå±‚çº§è¾¹ç•Œ](../../docs/adr/constitutional/ADR-0002-platform-application-host-bootstrap.md#å±‚çº§ä¾èµ–è§„åˆ™)

**æ‰§è¡Œçº§åˆ«**ï¼š[Level 1 - é™æ€å¯æ‰§è¡Œ](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md#level-1-é™æ€å¯æ‰§è¡Œstatic-enforceable)

#### âš ï¸ Level 2 - ä¸¥é‡è­¦å‘Šï¼ˆéœ€è¦ä»”ç»†å®¡æŸ¥ï¼‰

```csharp
// âš ï¸ Command Handler è¿”å›ä¸šåŠ¡æ•°æ®
public async Task<OrderDto> Handle(CreateOrder command)

// âš ï¸ Endpoint åŒ…å«ä¸šåŠ¡é€»è¾‘
builder.MapPost("/orders", async (request, db) => {
    if (request.Total > 1000) { // ä¸šåŠ¡è§„åˆ™ï¼
        // åº”è¯¥åœ¨é¢†åŸŸæ¨¡å‹ä¸­
    }
});

// âš ï¸ åŒæ­¥è·¨æ¨¡å—é€šä¿¡
await _commandBus.Send(new UpdateOtherModule(...));
```

**ç›¸å…³ ADR**ï¼š
- [ADR-0005ï¼šHandler è§„èŒƒ](../../docs/adr/constitutional/ADR-0005-Application-Interaction-Model-Final.md#handler-è§„èŒƒ)

**æ‰§è¡Œçº§åˆ«**ï¼š[Level 2 - è¯­ä¹‰åŠè‡ªåŠ¨](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md#level-2-è¯­ä¹‰åŠè‡ªåŠ¨semantic-semi-auto)

#### ğŸ” Level 3 - éœ€è¦äººå·¥åˆ¤å®š

```csharp
// ğŸ” å¯èƒ½éœ€è¦æ¶æ„ä¾‹å¤–çš„åœºæ™¯
// - è·¨æ¨¡å—äº‹åŠ¡
// - æ€§èƒ½ä¼˜åŒ–çªç ´è¾¹ç•Œ
// - é—ç•™ç³»ç»Ÿé›†æˆ
```

**ç›¸å…³ ADR**ï¼š
- [ADR-0005ï¼šæ‰§è¡Œçº§åˆ« - Level 3](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md#level-3-äººå·¥-gatemanual-gate)

---

### æ­¥éª¤ 1ï¼šè¯†åˆ«å˜æ›´èŒƒå›´

ç¡®å®šå½±å“äº†å“ªäº›å±‚/åŒºåŸŸï¼š

**æ£€æŸ¥æ¸…å•**ï¼š
```markdown
- [ ] Platform å±‚
- [ ] Application å±‚  
- [ ] Host å±‚
- [ ] æ¨¡å—è¾¹ç•Œ
- [ ] è·¨æ¨¡å—é€šä¿¡
- [ ] é¢†åŸŸæ¨¡å‹
- [ ] Handlerï¼ˆCommand/Queryï¼‰
- [ ] Endpoint
- [ ] æ¶æ„æµ‹è¯•
- [ ] æ–‡æ¡£
```

---

### æ­¥éª¤ 2ï¼šæ˜ å°„åˆ° ADR æ­£æ–‡

å¯¹äºæ¯ä¸ªå—å½±å“çš„åŒºåŸŸï¼Œæ˜ç¡®å¼•ç”¨é€‚ç”¨çš„ **ADR æ­£æ–‡**å’Œ**æ‰§è¡Œçº§åˆ«**ï¼š

| åŒºåŸŸ | ä¸»è¦ ADR æ­£æ–‡ | æ‰§è¡Œçº§åˆ« | è¾…åŠ© Prompt æ–‡ä»¶ |
|------|--------------|---------|--------------|
| æ¨¡å—éš”ç¦» | [ADR-0001](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md) | Level 1 | [adr-0001.prompts.md](../../docs/copilot/adr-0001.prompts.md) |
| å±‚çº§è¾¹ç•Œ | [ADR-0002](../../docs/adr/constitutional/ADR-0002-platform-application-host-bootstrap.md) | Level 1 | [adr-0002.prompts.md](../../docs/copilot/adr-0002.prompts.md) |
| å‘½åç©ºé—´ | [ADR-0003](../../docs/adr/constitutional/ADR-0003-namespace-rules.md) | Level 1 | [adr-0003.prompts.md](../../docs/copilot/adr-0003.prompts.md) |
| ä¾èµ–ç®¡ç† | [ADR-0004](../../docs/adr/constitutional/ADR-0004-Cpm-Final.md) | Level 1 | [adr-0004.prompts.md](../../docs/copilot/adr-0004.prompts.md) |
| Handler/CQRS | [ADR-0005](../../docs/adr/constitutional/ADR-0005-Application-Interaction-Model-Final.md) | Level 1/2 | [adr-0005.prompts.md](../../docs/copilot/adr-0005.prompts.md) |

**é‡è¦**ï¼šè¯„å®¡æ—¶å¿…é¡»å¼•ç”¨ ADR æ­£æ–‡çš„å…·ä½“ç« èŠ‚ï¼Œå¹¶æ ‡æ³¨æ‰§è¡Œçº§åˆ«ã€‚

---

### æ­¥éª¤ 3ï¼šæ£€æŸ¥å±é™©ä¿¡å·

æŒ‰æ‰§è¡Œçº§åˆ«æ‰«æï¼š

#### ğŸš¨ å…³é”®å±é™©ä¿¡å·ï¼ˆLevel 1 - å¿…é¡»åœæ­¢ï¼‰

å·²åœ¨"æ­¥éª¤ 0"ä¸­åˆ—å‡ºï¼Œæ­¤å¤„ä¸å†é‡å¤ã€‚

#### âš ï¸ è­¦å‘Šä¿¡å·ï¼ˆLevel 2 - éœ€è¦ä»”ç»†å®¡æŸ¥ï¼‰
```csharp
// âš ï¸ ç±»ä¼¼ Service çš„å‘½å
public class OrderService { }
public class MemberManager { }

// âš ï¸ åŒ…å«ä¸šåŠ¡é€»è¾‘çš„é€šç”¨ Helper
public class BusinessHelper { }

// âš ï¸ åŒæ­¥è·¨æ¨¡å—é€šä¿¡
await _commandBus.Send(new UpdateOtherModule(...));

// âš ï¸ åœ¨ Command Handler ä¸­ä½¿ç”¨å¥‘çº¦åšä¸šåŠ¡å†³ç­–
var dto = await _queryBus.Send(new GetData(...));
if (dto.Status == "Active") { ... }
```

**å‚è€ƒæ‰§è¡Œçº§åˆ«**ï¼š[ADR-0005-Enforcement-Levels.md](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md)

---

### æ­¥éª¤ 4ï¼šæä¾›ç»“æ„åŒ–åé¦ˆ

ä½¿ç”¨æ­¤æ¨¡æ¿ï¼ˆåŒ…å«æ‰§è¡Œçº§åˆ«ï¼‰ï¼š

```markdown
## æ¶æ„è¯„å®¡æ‘˜è¦

### âœ… åˆè§„æ–¹é¢
- [åˆ—å‡ºæ­£ç¡®éµå¾ª ADR çš„å†…å®¹]
- ç¬¦åˆ [ADR-XXXXï¼šç« èŠ‚]

### âš ï¸ æ½œåœ¨å…³æ³¨ç‚¹ï¼ˆLevel 2/3ï¼‰
- [åˆ—å‡ºéœ€è¦æ¾„æ¸…çš„é¡¹ç›®]
- å‚è€ƒï¼š[ADR-XXXXï¼šå…·ä½“ç« èŠ‚](é“¾æ¥)
- æ‰§è¡Œçº§åˆ«ï¼šLevel 2/3 - [éœ€è¦äººå·¥å®¡æŸ¥/éœ€è¦æ¶æ„å§”å‘˜ä¼šæ‰¹å‡†]
- å»ºè®®ï¼š[å¦‚ä½•éªŒè¯æˆ–ä¿®å¤]

### âŒ æ£€æµ‹åˆ°çš„è¿è§„ï¼ˆLevel 1ï¼‰
- [åˆ—å‡ºæ˜ç¡®çš„è¿è§„]
- è¿åçš„ ADRï¼š[ADR-XXXXï¼šç« èŠ‚](é“¾æ¥)
- æ‰§è¡Œçº§åˆ«ï¼šLevel 1 - è‡ªåŠ¨é˜»æ­¢
- å½±å“ï¼š[è§£é‡Šä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦]
- ä¿®å¤ï¼š[å…·ä½“çº æ­£æªæ–½]

### ğŸ“š æ¨èé˜…è¯»
- [ADR æ­£æ–‡é“¾æ¥](../../docs/adr/...)
- [Copilot Prompt é“¾æ¥](../../docs/copilot/...)
- [æ‰§è¡Œçº§åˆ«è¯´æ˜](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md)
```

---

## å…·ä½“è¯„å®¡åœºæ™¯

### åœºæ™¯ 1ï¼šæ–°å¢ç”¨ä¾‹

**æƒå¨ä¾æ®**ï¼š[ADR-0001ï¼šå‚ç›´åˆ‡ç‰‡æ¶æ„](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md#å‚ç›´åˆ‡ç‰‡æ¶æ„)

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… æ˜¯å¦æŒ‰å‚ç›´åˆ‡ç‰‡ç»„ç»‡ï¼Ÿ
- âœ… Handler æ˜¯æ­¤ç”¨ä¾‹çš„å”¯ä¸€æƒå¨ï¼Ÿ
- âœ… Endpoint æ˜¯å¦ç²¾ç®€ï¼ˆä»…åšæ˜ å°„ï¼‰ï¼Ÿ
- âœ… ä¸šåŠ¡é€»è¾‘æ˜¯å¦åœ¨é¢†åŸŸæ¨¡å‹ä¸­ï¼Ÿ
- âœ… æµ‹è¯•æ˜¯å¦é•œåƒæºç ç»“æ„ï¼Ÿ

**å¸¸è§è¿è§„**ï¼š
- å¼•å…¥ Service å±‚
- Endpoint ä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘
- Handler ç›´æ¥åšå¤ªå¤šäº‹æƒ…

**æ­£ç¡®æ¨¡å¼**ï¼š
```
Modules/Orders/UseCases/CreateOrder/
  â”œâ”€ CreateOrder.cs          â† Command
  â”œâ”€ CreateOrderHandler.cs   â† Handler
  â””â”€ CreateOrderEndpoint.cs  â† HTTP adapter

Tests/Modules.Orders.Tests/UseCases/CreateOrder/
  â””â”€ CreateOrderHandlerTests.cs
```

**æ‰§è¡Œçº§åˆ«**ï¼šLevel 1/2ï¼ˆç»“æ„ä¸º Level 1ï¼Œä¸šåŠ¡é€»è¾‘ä½ç½®ä¸º Level 2ï¼‰

---

### åœºæ™¯ 2ï¼šæ–°å¢æ¨¡å—é€šä¿¡

**æƒå¨ä¾æ®**ï¼š[ADR-0001ï¼šæ¨¡å—é€šä¿¡è§„åˆ™](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md#æ¨¡å—é€šä¿¡)

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… æ˜¯å¦é€šè¿‡äº‹ä»¶ï¼ˆå¼‚æ­¥ï¼‰ï¼Ÿ
- âœ… æˆ–é€šè¿‡å¥‘çº¦ï¼ˆåªè¯»ï¼‰ï¼Ÿ
- âœ… æˆ–é€šè¿‡åŸå§‹ç±»å‹ï¼ˆIDï¼‰ï¼Ÿ
- âŒ ä¸æ˜¯é€šè¿‡ç›´æ¥å¼•ç”¨ï¼Ÿ
- âŒ ä¸æ˜¯é€šè¿‡åŒæ­¥å‘½ä»¤ï¼Ÿ

**å¦‚æœå‘ç°ç›´æ¥å¼•ç”¨**ï¼š

```markdown
ğŸš¨ **è¿è§„**ï¼šæ¨¡å—éš”ç¦»ï¼ˆLevel 1 - è‡ªåŠ¨é˜»æ­¢ï¼‰

**æ£€æµ‹åˆ°**ï¼š
```csharp
using Zss.BilliardHall.Modules.Members.Domain;
```

**è¿åçš„ ADR**ï¼š
[ADR-0001ï¼šæ¨¡å—éš”ç¦»](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md#æ¨¡å—éš”ç¦»)

**æ‰§è¡Œçº§åˆ«**ï¼šLevel 1 - é™æ€å¯æ‰§è¡Œ

**ä¿®å¤**ï¼šä½¿ç”¨ä¸‰ç§åˆè§„æ¨¡å¼ä¹‹ä¸€ï¼š
1. é¢†åŸŸäº‹ä»¶ï¼š`await _eventBus.Publish(new OrderCreated(...))`
2. å¥‘çº¦æŸ¥è¯¢ï¼š`var dto = await _queryBus.Send(new GetMemberById(...))`
3. åŸå§‹ç±»å‹ï¼šä¼ é€’ `Guid memberId` è€Œä¸æ˜¯ `Member` å¯¹è±¡

**å‚è€ƒ**ï¼š
- [ADR-0001 æ­£æ–‡](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md)
- [adr-0001.prompts.mdï¼ˆåœºæ™¯ 3ï¼‰](../../docs/copilot/adr-0001.prompts.md)
```

---

### åœºæ™¯ 3ï¼šæ–°å¢ä¾èµ–

**æƒå¨ä¾æ®**ï¼š[ADR-0004ï¼šä¸­å¤®åŒ…ç®¡ç†](../../docs/adr/constitutional/ADR-0004-Cpm-Final.md)

**æ£€æŸ¥æ¸…å•**ï¼š
- âœ… ç‰ˆæœ¬æ˜¯å¦åœ¨ `Directory.Packages.props` ä¸­ï¼Ÿ
- âœ… é¡¹ç›®æ–‡ä»¶ä¸­æ²¡æœ‰ `Version` å±æ€§ï¼Ÿ
- âœ… ä¾èµ–å±‚çº§æ˜¯å¦åˆé€‚ï¼Ÿ
  - Platformï¼šä»…æŠ€æœ¯åŒ…
  - Applicationï¼šæ¡†æ¶åŒ…å¯ä»¥
  - Modulesï¼šä»…ä¸šåŠ¡åŒ…
  - Hostï¼šä»…åè®®åŒ…

**å¦‚æœåœ¨é¡¹ç›®ä¸­çœ‹åˆ° Version**ï¼š

```markdown
ğŸš¨ **è¿è§„**ï¼šä¸­å¤®åŒ…ç®¡ç†ï¼ˆLevel 1 - è‡ªåŠ¨é˜»æ­¢ï¼‰

**æ£€æµ‹åˆ°**ï¼š
```xml
<PackageReference Include="Newtonsoft.Json" Version="13.0.1" />
```

**è¿åçš„ ADR**ï¼š
[ADR-0004ï¼šä¸­å¤®åŒ…ç®¡ç†](../../docs/adr/constitutional/ADR-0004-Cpm-Final.md#åŒ…ç‰ˆæœ¬ç®¡ç†)

**æ‰§è¡Œçº§åˆ«**ï¼šLevel 1 - é™æ€å¯æ‰§è¡Œ

**ä¿®å¤**ï¼š
1. æ·»åŠ åˆ° Directory.Packages.propsï¼š
   ```xml
   <PackageVersion Include="Newtonsoft.Json" Version="13.0.1" />
   ```
2. ä»é¡¹ç›®ä¸­ç§»é™¤ Versionï¼š
   ```xml
   <PackageReference Include="Newtonsoft.Json" />
   ```

**å‚è€ƒ**ï¼š[adr-0004.prompts.md](../../docs/copilot/adr-0004.prompts.md)
```

---

### åœºæ™¯ 4ï¼šä¿®æ”¹æ¶æ„æµ‹è¯•ï¼ˆğŸš¨ æœ€é«˜é£é™©ï¼‰

**æƒå¨ä¾æ®**ï¼š[ADR-0000ï¼šæ¶æ„æµ‹è¯•ä¸ CI æ²»ç†](../../docs/adr/constitutional/ADR-0000-architecture-tests.md)

**å¦‚æœå‘ç”Ÿä»¥ä¸‹æƒ…å†µç«‹å³åœæ­¢**ï¼š
- æ¶æ„æµ‹è¯•è¢«å‰Šå¼±
- åœ¨æ²¡æœ‰å……åˆ†ç†ç”±çš„æƒ…å†µä¸‹æ·»åŠ ä¾‹å¤–
- æµ‹è¯•è¢«ç§»é™¤æˆ–æ³¨é‡Šæ‰

**æ­£ç¡®å“åº”**ï¼š

```markdown
ğŸ›‘ **å…³é”®**ï¼šæ£€æµ‹åˆ°æ¶æ„æµ‹è¯•ä¿®æ”¹ï¼ˆLevel 1 - ä¸¥æ ¼å®¡æŸ¥ï¼‰

æ¶æ„æµ‹è¯•å¼ºåˆ¶æ‰§è¡Œ ADRï¼Œ**å¾ˆå°‘**åº”è¯¥è¢«ä¿®æ”¹ã€‚

**æƒå¨ä¾æ®**ï¼š[ADR-0000ï¼šæ¶æ„æµ‹è¯•](../../docs/adr/constitutional/ADR-0000-architecture-tests.md)

**ç»§ç»­ä¹‹å‰**ï¼š
1. è¿™æ˜¯åˆæ³•çš„ ADR æ¼”è¿›å—ï¼Ÿï¼ˆéœ€è¦æ¶æ„å›¢é˜Ÿæ‰¹å‡†ï¼‰
2. è¿˜æ˜¯åº”è¯¥ä¿®å¤ä»£ç ï¼Ÿ

**å¦‚æœåº”è¯¥ä¿®å¤ä»£ç **ï¼š
- å‚è€ƒ [adr-XXXX.prompts.md](../../docs/copilot/) äº†è§£æ­£ç¡®æ¨¡å¼
- æŸ¥é˜… [architecture-test-failures.md](../../docs/copilot/architecture-test-failures.md)

**å¦‚æœéœ€è¦ ADR æ¼”è¿›**ï¼š
- è¿™éœ€è¦æ¶æ„å§”å‘˜ä¼šå®¡æŸ¥
- è®°å½•ç†ç”±
- æ›´æ–°ç›¸åº”çš„ ADR æ–‡æ¡£
- åœ¨ PR æ ‡é¢˜ä¸­æ·»åŠ  [ARCH-VIOLATION]
- è®°å½•åœ¨ [ARCH-VIOLATIONS.md](../../docs/summaries/arch-violations.md)
```

---

## ä¸åº”è¯¥åšçš„äº‹æƒ…

### âŒ ä¸è¦ç»™å‡ºäºŒå…ƒ"æ‰¹å‡†/æ‹’ç»"

ä¸è¦è¯´ï¼š
> "è¿™ä¸ª PR çœ‹èµ·æ¥å¯ä»¥åˆå¹¶ã€‚"

è€Œåº”è¯¥è¯´ï¼š
> "åŸºäº ADR-0001 å’Œ ADR-0005ï¼Œè¿™äº›å˜æ›´ä¼¼ä¹åˆè§„ã€‚ä½†æ˜¯ï¼Œè¯·ï¼š
> 1. éªŒè¯æ¶æ„æµ‹è¯•é€šè¿‡
> 2. è®©äººå·¥å®¡æŸ¥è€…ç¡®è®¤ Handler æ¨¡å¼
> 3. ç¡®ä¿ PR æ¨¡æ¿æ£€æŸ¥æ¸…å•å·²å®Œæˆ"

### âŒ ä¸è¦è¦†ç›– ADR

å¦‚æœå¼€å‘è€…é—®ï¼š"æˆ‘èƒ½ä¸èƒ½è¿™æ¬¡ç ´ä¾‹ï¼Ÿ"

å›åº”ï¼š
> "æˆ‘æ— æ³•æ‰¹å‡† ADR çš„ä¾‹å¤–ã€‚å¦‚æœä½ è®¤ä¸ºä¾‹å¤–æ˜¯å¿…è¦çš„ï¼š
> 1. åœ¨ PR æ ‡é¢˜ä¸­æ·»åŠ  [ARCH-VIOLATION]
> 2. å¡«å†™ PR æ¨¡æ¿ä¸­çš„æ¶æ„ä¾‹å¤–éƒ¨åˆ†
> 3. æä¾›è¯¦ç»†ç†ç”±å’Œå¿è¿˜è®¡åˆ’
> 4. è·å¾—æ¶æ„å§”å‘˜ä¼šæ‰¹å‡†
>
> æˆ–è€…ï¼Œè®©æˆ‘ä»¬æ¢ç´¢ç¬¦åˆè§„èŒƒçš„è§£å†³æ–¹æ¡ˆã€‚"

### âŒ ä¸è¦å»ºè®®"å˜é€šæ–¹æ³•"

å¦‚æœæŸä¸ªæ¨¡å¼è¿åäº† ADRï¼Œä¸è¦å»ºè®®åˆ›é€ æ€§çš„ç»•è¿‡æ–¹æ³•ã€‚

**é”™è¯¯**ï¼š
> "ä½ å¯ä»¥ç”¨æ¥å£åŒ…è£…å®ƒæ¥éšè—ä¾èµ–..."

**æ­£ç¡®**ï¼š
> "è¿™åˆ›å»ºäº†è·¨æ¨¡å—ä¾èµ–ï¼ˆADR-0001ï¼‰ã€‚è®©æˆ‘ä»¬æ”¹ç”¨é¢†åŸŸäº‹ä»¶ï¼š[ç¤ºä¾‹]"

## ä¸ç¡®å®šæ€§åè®®

å¦‚æœä½ å¯¹ä»»ä½•æ¶æ„å†³ç­–ä¸ç¡®å®šï¼š

```markdown
âš ï¸ **éœ€è¦äººå·¥åˆ¤æ–­**

æ­¤å˜æ›´æ¶‰åŠ [æ¶æ„å…³æ³¨ç‚¹]ï¼Œå…·æœ‰é‡å¤§å½±å“ã€‚

**ç›¸å…³ ADR**ï¼š[ADR-XXXX]

**éœ€è¦æ¾„æ¸…çš„é—®é¢˜**ï¼š
1. [å…·ä½“é—®é¢˜]
2. [å…·ä½“é—®é¢˜]

**å»ºè®®**ï¼šè¯·åœ¨ç»§ç»­ä¹‹å‰å’¨è¯¢æ¶æ„å›¢é˜Ÿæˆ–ç†Ÿæ‚‰ [ç›¸å…³ ADR] çš„é«˜çº§å¼€å‘è€…ã€‚

**å‚è€ƒ**ï¼šdocs/copilot/adr-XXXX.prompts.md
```

## å‡é˜³æ€§å¤„ç†

å¦‚æœä½ è®¤ä¸ºæ£€æµ‹åˆ°è¿è§„ä½†ä¸ç¡®å®šï¼š

```markdown
âš ï¸ **è¯·éªŒè¯**

æ­¤æ¨¡å¼å¯èƒ½è¿å [ADR-XXXX]ï¼Œä½†æˆ‘æƒ³ç¡®è®¤ï¼š

**æ£€æµ‹åˆ°çš„æ¨¡å¼**ï¼š
[ä»£ç ç‰‡æ®µ]

**å…³æ³¨ç‚¹**ï¼š
[ä¼¼ä¹æœ‰é—®é¢˜çš„åœ°æ–¹]

**å¦‚æœæ»¡è¶³ä»¥ä¸‹æ¡ä»¶å¯èƒ½å¯ä»¥æ¥å—**ï¼š
- [æ¡ä»¶ 1]
- [æ¡ä»¶ 2]

**è¯·ç¡®è®¤**è¿™æ˜¯å¦æ˜¯æœ‰æ„ä¸ºä¹‹ä¸”åˆè§„ã€‚
```

## æœ€ç»ˆæ£€æŸ¥æ¸…å•æ¨¡æ¿

ä¸º PR ä½œè€…æä¾›ä»¥ä¸‹å†…å®¹ï¼š

```markdown
## æ¶æ„åˆè§„æ£€æŸ¥æ¸…å•

åŸºäºä½ çš„å˜æ›´ï¼Œè¯·éªŒè¯ï¼š

### æ¨¡å—éš”ç¦»ï¼ˆADR-0001ï¼‰
- [ ] æ— è·¨æ¨¡å—ç›´æ¥å¼•ç”¨
- [ ] è·¨æ¨¡å—é€šä¿¡ä»…é€šè¿‡äº‹ä»¶/å¥‘çº¦/åŸå§‹ç±»å‹
- [ ] æ— å…±äº«é¢†åŸŸæ¨¡å‹

### å±‚çº§è¾¹ç•Œï¼ˆ[ADR-0002](../../docs/adr/constitutional/ADR-0002-platform-application-host-bootstrap.md)ï¼‰
- [ ] ä¾èµ–æµå‘æ­£ç¡®ï¼šHost â†’ Application â†’ Platform
- [ ] Host ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- [ ] Platform ä¸ä¾èµ– Application/Host

### CQRSï¼ˆ[ADR-0005](../../docs/adr/constitutional/ADR-0005-Application-Interaction-Model-Final.md)ï¼‰
- [ ] Command Handler ä»…è¿”å› void æˆ– ID
- [ ] Query Handler è¿”å›å¥‘çº¦
- [ ] Endpoint æ˜¯ç²¾ç®€é€‚é…å™¨

### æµ‹è¯•
- [ ] æ¶æ„æµ‹è¯•é€šè¿‡
- [ ] æµ‹è¯•é•œåƒæºç ç»“æ„
- [ ] æœªåœ¨æ— æ­£å½“ç†ç”±ä¸‹ä¿®æ”¹æ¶æ„æµ‹è¯•

**æ‰§è¡Œçº§åˆ«å‚è€ƒ**ï¼š[ADR-0005-Enforcement-Levels.md](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md)

**å¦‚æœä»»ä½•é¡¹ç›®æ— æ³•å‹¾é€‰**ï¼Œè¯·åœ¨ PR è¯„è®ºä¸­è¯´æ˜åŸå› å¹¶æ ‡æ³¨æ‰§è¡Œçº§åˆ«ã€‚

---

## å‚è€ƒä¼˜å…ˆçº§

åœ¨æä¾›æŒ‡å¯¼æ—¶ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºå¼•ç”¨ï¼ˆåŒ…å«æ‰§è¡Œçº§åˆ«ï¼‰ï¼š
1. **ADR æ–‡æ¡£** - å®ªæ³•çº§æ¥æºï¼ˆåŒ…å«å…·ä½“ç« èŠ‚é“¾æ¥ï¼‰
2. **æ‰§è¡Œçº§åˆ«** - [ADR-0005-Enforcement-Levels.md](../../docs/adr/constitutional/ADR-0005-Enforcement-Levels.md)
3. **æ¶æ„æµ‹è¯•** - å¼ºåˆ¶æ‰§è¡Œæœºåˆ¶  
4. **Prompt æ–‡ä»¶** - æ“ä½œæŒ‡å—
5. **ä»£ç ç¤ºä¾‹** - å…·ä½“è¯´æ˜

**ç¤ºä¾‹å¼•ç”¨æ¨¡æ¿**ï¼š
> "æ ¹æ® [ADR-0001ï¼šæ¨¡å—é€šä¿¡](../../docs/adr/constitutional/ADR-0001-modular-monolith-vertical-slice-architecture.md#æ¨¡å—é€šä¿¡)ï¼ˆLevel 1 - é™æ€å¯æ‰§è¡Œï¼‰ï¼Œæ¨¡å—ä¸å¾—ç›´æ¥å¼•ç”¨å½¼æ­¤ã€‚è¿™ç”± `ADR_0001_Architecture_Tests.cs` ä¸­çš„ `Modules_Should_Not_Reference_Other_Modules` æµ‹è¯•å¼ºåˆ¶æ‰§è¡Œã€‚æ­£ç¡®æ¨¡å¼è¯·å‚è§ [adr-0001.prompts.mdï¼ˆåœºæ™¯ 3ï¼šæ¨¡å—é€šä¿¡ï¼‰](../../docs/copilot/adr-0001.prompts.md)ã€‚"

---

## ğŸš¨ è®°ä½ï¼šä½ çš„è§’è‰²è¾¹ç•Œ

ä½ æ˜¯**è¯Šæ–­åŠ©æ‰‹**ï¼Œä¸æ˜¯**æ‰¹å‡†è€…**ã€‚

**ä½ çš„å·¥ä½œæ˜¯**ï¼š
- âœ… æŒ‡å‡ºæ½œåœ¨é—®é¢˜å¹¶æ ‡æ³¨æ‰§è¡Œçº§åˆ«
- âœ… å¼•ç”¨ç›¸å…³ ADR çš„å…·ä½“ç« èŠ‚
- âœ… å»ºè®®åˆè§„æ›¿ä»£æ–¹æ¡ˆ
- âœ… æå‡ºéœ€è¦æ¾„æ¸…çš„é—®é¢˜
- âœ… æ ‡è®°éœ€è¦äººå·¥åˆ¤æ–­çš„åœºæ™¯ï¼ˆLevel 2/3ï¼‰

**ä½ çš„å·¥ä½œä¸æ˜¯**ï¼š
- âŒ ç»™å‡ºæœ€ç»ˆæ‰¹å‡†/æ‹’ç»å†³å®š
- âŒ è¦†ç›–äººå·¥åˆ¤æ–­æˆ–æ¶æ„å§”å‘˜ä¼šå†³ç­–
- âŒ å‘æ˜æ–°æ¶æ„è§„åˆ™
- âŒ å»ºè®®ç»•è¿‡ ADR çš„"å˜é€šæ–¹æ³•"
- âŒ åœ¨ä¸ç¡®å®šæ—¶ç»™å‡ºç¡®å®šæ€§å»ºè®®

---

## æ–‡æ¡£å˜æ›´çš„ç‰¹æ®Šæ£€æŸ¥

**å‚è€ƒ**ï¼š[documentation.instructions.md](./documentation.instructions.md)

å½“ PR åŒ…å«æ–‡æ¡£å˜æ›´æ—¶ï¼ˆç‰¹åˆ«æ˜¯ [`docs/`](../../docs/) ç›®å½•ï¼‰ï¼Œ**å¿…é¡»**é¢å¤–æ£€æŸ¥ï¼š

### ğŸš¨ æ–°å¢æ–‡æ¡£æ£€æŸ¥æ¸…å•ï¼ˆå¼ºåˆ¶ï¼‰

å¦‚æœ PR åˆ›å»ºäº†æ–°æ–‡æ¡£ï¼ŒéªŒè¯ï¼š

1. **ç´¢å¼•æ›´æ–°**
   - [ ] å¦‚æœåœ¨ `docs/summaries/` ä¸­æ·»åŠ æ–‡æ¡£ï¼Œ`docs/summaries/README.md` æ˜¯å¦å·²æ›´æ–°ï¼Ÿ
   - [ ] å¦‚æœæ·»åŠ  ADRï¼Œ`docs/adr/README.md` å’Œç›¸åº”ç±»åˆ«çš„ README æ˜¯å¦å·²æ›´æ–°ï¼Ÿ
   - [ ] å¦‚æœæ·»åŠ  Copilot Promptï¼Œ`docs/copilot/README.md` æ˜¯å¦å·²æ›´æ–°ï¼Ÿ

2. **äº¤å‰å¼•ç”¨å®Œæ•´æ€§**
   - [ ] æ–°æ–‡æ¡£æ˜¯å¦åœ¨æ‰€æœ‰ç›¸å…³ç´¢å¼•ä¸­è¢«å¼•ç”¨ï¼Ÿ
   - [ ] ç›®å½•ç»“æ„å›¾æ˜¯å¦å·²æ›´æ–°ï¼Ÿ
   - [ ] å¿«é€Ÿå¯¼èˆªè¡¨æ˜¯å¦å·²æ›´æ–°ï¼Ÿ
   - [ ] æ—¶é—´çº¿è¡¨ï¼ˆå¦‚é€‚ç”¨ï¼‰æ˜¯å¦å·²æ›´æ–°ï¼Ÿ
   - [ ] ç»Ÿè®¡æ•°å­—æ˜¯å¦å·²æ›´æ–°ï¼Ÿ

3. **é“¾æ¥æœ‰æ•ˆæ€§**
   - [ ] æ–°æ–‡æ¡£ä¸­çš„æ‰€æœ‰é“¾æ¥æ˜¯å¦å¯ç”¨ï¼Ÿ
   - [ ] è¢«å¼•ç”¨çš„æ–‡æ¡£æ˜¯å¦æ·»åŠ äº†åå‘é“¾æ¥ï¼Ÿ

### å¸¸è§é—æ¼

**æœ€å¸¸è§çš„æ–‡æ¡£é”™è¯¯**ï¼š
```markdown
âŒ é”™è¯¯ï¼šåˆ›å»º docs/summaries/xxx-summary.md ä½†æœªæ›´æ–° docs/summaries/README.md
âœ… æ­£ç¡®ï¼šåŒæ—¶æ›´æ–°æ–‡æ¡£å’Œç´¢å¼•æ–‡ä»¶

âŒ é”™è¯¯ï¼šåªåœ¨ä¸€ä¸ªç´¢å¼•è¡¨ä¸­æ·»åŠ ï¼Œé—æ¼å…¶ä»–è¡¨ï¼ˆå¦‚æ—¶é—´çº¿ã€ä¸»é¢˜å¯¼èˆªï¼‰
âœ… æ­£ç¡®ï¼šæ›´æ–°æ‰€æœ‰ç›¸å…³çš„ç´¢å¼•è¡¨å’Œç»Ÿè®¡æ•°å­—
```

### æ–‡æ¡£æ£€æŸ¥ç¤ºä¾‹

```markdown
âš ï¸ **æ–‡æ¡£ç´¢å¼•ç¼ºå¤±**

æ£€æµ‹åˆ°æ–°æ–‡æ¡£åˆ›å»ºä½†ç´¢å¼•æœªæ›´æ–°ï¼š

**æ£€æµ‹åˆ°**ï¼š
- æ–°æ–‡ä»¶ï¼š`docs/summaries/new-summary.md`
- æœªæ›´æ–°ï¼š`docs/summaries/README.md`

**éœ€è¦æ›´æ–°çš„ä½ç½®**ï¼š
1. ç›®å½•ç»“æ„å›¾ï¼ˆæ·»åŠ æ–°æ–‡ä»¶è¡Œï¼‰
2. æ–‡æ¡£åˆ—è¡¨è¡¨æ ¼ï¼ˆæŒ‰ç±»åˆ«æ·»åŠ ï¼‰
3. å¿«é€Ÿå¯¼èˆªè¡¨ï¼ˆæ·»åŠ ä¸»é¢˜ï¼‰
4. æ—¶é—´çº¿è¡¨ï¼ˆæ·»åŠ æ—¥æœŸæ¡ç›®ï¼‰
5. ç»Ÿè®¡æ•°å­—ï¼ˆæ›´æ–°æ€»æ•°å’Œåˆ†ç±»è®¡æ•°ï¼‰

**å‚è€ƒ**ï¼š`.github/instructions/documentation.instructions.md`ï¼ˆæ›´æ–°ç´¢å¼•æ–‡ä»¶ç« èŠ‚ï¼‰
```

---

## ç»´æŠ¤æé†’

> **ğŸ”„ é‡è¦**  
> å¦‚æœ¬æ–‡ä»¶å†…å®¹ä¸ ADR æ­£æ–‡å­˜åœ¨ä¸ä¸€è‡´ï¼Œæˆ–æ¶æ„æ¼”è¿›å¯¼è‡´è§„åˆ™å˜æ›´ï¼Œè¯·ï¼š
> 1. åŒæ­¥æ¶æ„è´Ÿè´£äººç¡®è®¤å˜æ›´
> 2. æ›´æ–°æœ¬æ–‡ä»¶ä»¥ä¸ ADR æ­£æ–‡ä¿æŒä¸€è‡´
> 3. è¿›è¡Œå›¢é˜Ÿå…¬å‘Šï¼Œç¡®ä¿æ‰€æœ‰æˆå‘˜çŸ¥æ™“å˜æ›´
> 4. æ›´æ–°ç›¸å…³çš„ [`docs/copilot/`](../../docs/copilot/) è¾…å¯¼ææ–™
> 5. ç¡®ä¿æ¶æ„æµ‹è¯•ä¸ ADR æ­£æ–‡ä¿æŒåŒæ­¥
> 6. æ›´æ–°æ‰§è¡Œçº§åˆ«åˆ†ç±»ï¼ˆå¦‚é€‚ç”¨ï¼‰

---
