---
adr: ADR-DOC-GAP-ANALYSIS
title: "文档治理体系空白分析与建设建议"
status: Proposal
level: Analysis
version: "1.0"
deciders: "Architecture Board"
date: 2026-01-26
maintainer: "Architecture Board"
primary_enforcement: L1
reviewer: "Architecture Board"
supersedes: null
superseded_by: null
---

# 文档治理体系空白分析与建设建议

**状态**：📋 Proposal（提案，非正式 ADR）  
**级别**：分析报告（Analysis Report）  
**版本**：1.0  
**创建日期**：2026-01-26  
**分析范围**：文档内容与管理治理机制  
**分析基础**：基于 ADR-0000~0008, 0100-0124, 0200-0240, 0340, 0900-0930 及 Wolverine + Marten 垂直切片架构

> ⚠️ **文档性质说明**：本文档是分析报告和提案，不是正式 ADR，不具备架构裁决力。  
> 提案需经过 ADR-900 规定的 RFC 流程和架构委员会审批后，才能转化为正式 ADR。

---

## 执行摘要（Executive Summary）

本文档分析了当前 Zss.BilliardHall 项目的文档治理体系，识别出 **5 个关键空白领域**和 **12 个缺失的治理机制**。

### 关键发现

**已完善领域** ✅：
- ADR 正文治理（ADR-0008, 0900）
- README 治理（ADR-910）
- 示例代码治理（ADR-920）

**缺失领域** ❌：
1. **ADR 关系管理** - 交叉引用、依赖追溯、替代关系标准化
2. **非裁决性文档** - 指南/FAQ/案例文档治理边界
3. **Onboarding 文档** - 周期性审计、结构规范、责任人制度
4. **自动化日志集成** - 测试报告、CI 日志、工具输出分发标准
5. **三位一体同步** - ADR/测试/Prompt 强制同步机制

### 建议优先级

- 🔴 **P0（紧急）**：3 项 - ADR-940, ADR-980, ADR-950
- 🟡 **P1（重要）**：5 项 - ADR-960, ADR-951, ADR-952, ADR-970, ADR-990
- 🟢 **P2（增强）**：4 项 - ADR-945, ADR-955, ADR-965, ADR-975

**总工时估算**：37-43 天，分 3 阶段实施（8 周）

---

## 文档类型说明（Document Type）

**本文档不是正式 ADR**，而是一份**分析报告和提案集合**，用于：
- 识别当前文档治理体系的空白
- 提出 12 项 ADR 建设建议
- 制定实施路线图

**本文档不包含架构决策或规则**，仅提供分析和建议。每项建议需要通过 ADR-900 规定的正式流程转化为独立的 ADR 后才具备裁决力。

---

## 目录

1. [现状分析](#现状分析)
2. [空白领域识别](#空白领域识别)
3. [建设建议汇总](#建设建议汇总)
4. [建设建议详述](#建设建议详述)
5. [实施路线图](#实施路线图)
6. [风险与依赖](#风险与依赖)

---

## 现状分析

### 已有文档治理机制

| ADR 编号 | 名称 | 治理范围 | 完备度 |
|---------|------|---------|--------|
| ADR-0000 | 架构测试与 CI 治理宪法 | 测试执法 | ✅ 高 |
| ADR-0008 | 文档编写与维护宪法 | 文档分级、权限边界 | ✅ 高 |
| ADR-900 | ADR 新增与修订流程 | ADR 生命周期 | ✅ 高 |
| ADR-910 | README 治理宪法 | README 专项治理 | ✅ 高 |
| ADR-920 | 示例代码治理宪法 | 示例代码专项治理 | ✅ 高 |
| ADR-930 | 代码审查与合规自检 | PR 审查流程 | ✅ 中 |

### 文档体系结构

```
docs/
├── adr/                    # ✅ 已有治理：ADR-0008, 0900
├── copilot/               # ✅ 已有治理：ADR-0007
├── summaries/             # ❌ 缺少治理
├── guides/                # ❌ 缺少治理
├── engineering-standards/ # ❌ 缺少治理
├── templates/             # ❌ 缺少治理
└── [根级指南]              # ⚠️ 部分治理
```

---

## 空白领域识别

### 领域 1：ADR 关系与溯源管理 🔴 P0

**当前问题**：
- ✗ ADR 之间的关系（依赖、替代、引用）未标准化
- ✗ ADR 演进历史难以追溯（缺少全局视图）
- ✗ 破坏性变更的影响面分析缺少系统化方法

**具体空白**：
1. 交叉引用标准缺失 - 引用方式不统一，难以自动化提取关系图
2. 依赖关系未显式声明 - 无法自动检测循环依赖
3. 替代关系不完整 - 未要求新 ADR 反向链接被替代的 ADR
4. 变更历史分散 - 缺少全局时间线视图

**建议治理机制**：ADR-940

---

### 领域 2：非裁决性文档治理标准 🟡 P1

**当前问题**：
- ✗ 指南/FAQ/案例文档缺少统一治理标准
- ✗ 与 ADR 的分离边界不明确
- ✗ 工程标准与 ADR 的关系模糊

**具体空白**：
1. 指南文档定位不清 - 何时写 Guide vs ADR 没有明确规则
2. FAQ 文档缺失 - 常见问题散落各处
3. 案例库未建立 - 实践经验未沉淀
4. 工程标准边界模糊 - 与 ADR-0340 关系不明确
5. 演进路线图缺失 - 团队对未来方向认知不一致

**建议治理机制**：ADR-950, ADR-951, ADR-952, ADR-990

---

### 领域 3：Onboarding 文档专项治理 🟡 P1

**当前问题**：
- ✗ QUICK-START.md 缺少定期审计机制
- ✗ Onboarding 文档结构未标准化
- ✗ 职责分离不明确
- ✗ 新人反馈机制缺失

**具体空白**：
1. 周期性自检缺失 - 可能与实际代码脱节
2. 内容结构不统一 - 风格各异
3. 职责分离缺失 - 无明确负责人
4. 新人反馈未系统化 - 痛点无法持续改进
5. 成功标准缺失 - 不知道何时算"入门完成"

**建议治理机制**：ADR-960

---

### 领域 4：自动化工具日志集成与分发 🟢 P2

**当前问题**：
- ✗ 测试报告、CI 日志缺少统一管理
- ✗ 自动生成的变更记录缺少分发标准
- ✗ 日志与文档的关联机制缺失

**具体空白**：
1. 测试报告分发缺失 - 开发者需主动去 CI 查看
2. 变更日志未结构化 - 难以追溯
3. 日志与文档关联缺失 - 需手动查找相关 ADR
4. 自动化报告标准缺失 - 格式不统一

**建议治理机制**：ADR-970

---

### 领域 5：ADR 生命周期一体化变更同步 🔴 P0

**当前问题**：
- ✗ ADR-900 要求"三位一体交付"但缺少强制同步机制
- ✗ ADR 变更时，Prompt 和测试可能漏更新
- ✗ 缺少自动化检测工具

**具体空白**：
1. 同步检测缺失 - 依赖人工检查
2. 变更传播规则不明确 - 无映射规则
3. 版本一致性缺失 - 版本号独立
4. 变更通知机制缺失 - 相关方不知道需更新

**建议治理机制**：ADR-980

---

## 建设建议汇总

### 🔴 P0：紧急建议（3项）

| 编号 | 名称 | 目的 | 预计工时 |
|------|------|------|----------|
| ADR-940 | ADR 关系与溯源管理宪法 | 标准化 ADR 关系管理 | 2-3天 |
| ADR-980 | ADR 生命周期一体化同步机制 | 强制 ADR/测试/Prompt 同步 | 3-4天 |
| ADR-950 | 指南与 FAQ 文档治理宪法 | 明确非裁决性文档边界 | 2-3天 |

### 🟡 P1：重要建议（5项）

| 编号 | 名称 | 目的 | 预计工时 |
|------|------|------|----------|
| ADR-960 | Onboarding 文档治理宪法 | 系统化 Onboarding 管理 | 3-4天 |
| ADR-951 | 案例库管理规范 | 沉淀实践经验 | 1-2天 |
| ADR-952 | 工程标准与 ADR 分离边界 | 明确工程标准定位 | 1-2天 |
| ADR-970 | 自动化工具日志集成标准 | 统一日志管理 | 3-4天 |
| ADR-990 | 文档演进路线图管理规范 | 系统化路线图管理 | 1-2天 |

### 🟢 P2：增强建议（4项）

| 编号 | 名称 | 目的 | 预计工时 |
|------|------|------|----------|
| ADR-945 | ADR 全局时间线与演进视图 | 提供演进全局视图 | 2-3天 |
| ADR-955 | 文档搜索与可发现性优化 | 提升查找效率 | 2-3天 |
| ADR-965 | Onboarding 互动式学习路径 | 提供交互式体验 | 2-3天 |
| ADR-975 | 文档质量指标与监控 | 量化评估文档质量 | 3-4天 |

---

## 建设建议详述

### ADR-940：ADR 关系与溯源管理宪法 🔴 P0

**核心内容**：

1. **强制关系声明章节**
   ```markdown
   ## Relationships（关系声明）
   
   **依赖（Depends On）**：[列出本 ADR 基于的其他 ADR]
   **被依赖（Depended By）**：[列出依赖本 ADR 的其他 ADR]
   **替代（Supersedes）**：[列出本 ADR 取代的 ADR]
   **被替代（Superseded By）**：[列出取代本 ADR 的 ADR]
   **相关（Related）**：[列出相关但不依赖的 ADR]
   ```

2. **关系类型定义**
   - 依赖：本 ADR 基于另一 ADR
   - 被依赖：其他 ADR 基于本 ADR
   - 替代：本 ADR 取代另一 ADR
   - 被替代：本 ADR 已被取代
   - 相关：相关但不依赖

3. **自动化验证**
   - 检查所有 ADR 包含关系声明章节
   - 验证关系的双向性（A 依赖 B → B 被 A 依赖）
   - 验证废弃 ADR 指向替代 ADR

4. **全局关系图**
   - 自动生成 ADR 关系图
   - 位置：`docs/adr/ADR-RELATIONSHIP-MAP.md`

---

### ADR-980：ADR 生命周期一体化同步机制 🔴 P0

**核心内容**：

1. **版本号关联**
   - ADR 正文、测试、Prompt 版本号必须一致
   - 格式：`**版本**：3.2` / `v3.2`

2. **同步检测**
   - CI 自动检测版本号一致性
   - 不一致时阻断构建

3. **变更传播清单**
   ```markdown
   修改 ADR-XXXX 时必须：
   - [ ] ADR 正文版本号 +1
   - [ ] 测试版本号同步
   - [ ] Prompt 版本号同步
   - [ ] 更新关系图
   - [ ] 通知相关责任人
   ```

4. **CODEOWNERS 机制**
   - 基于文件路径自动通知责任人

---

### ADR-950：指南与 FAQ 文档治理宪法 🔴 P0

**核心内容**：

1. **文档类型定义**
   | 类型 | 目的 | 允许定义规则 | 更新频率 |
   |------|------|------------|----------|
   | ADR | 定义规则 | ✅ | 很少 |
   | Guide | 解释应用 | ❌ | 随 ADR 变更 |
   | FAQ | 解答问题 | ❌ | 按需 |
   | Case | 记录案例 | ❌ | 按需 |
   | Standard | 工程标准 | ⚠️ | 按需 |

2. **分离边界规则**
   - 何时写 ADR：定义约束、引入术语、需测试执行
   - 何时写 Guide：解释应用、操作步骤、工具使用
   - 何时写 FAQ：解答疑问、澄清概念、快速参考

3. **文档结构标准**
   - Guide 必须包含：目的、前置条件、步骤、参考
   - FAQ 必须包含：分类、Q&A、ADR 参考

4. **定期审计**
   - 每季度审核 Guide 与 ADR 同步性
   - 检查 FAQ 相关性

---

### ADR-960：Onboarding 文档治理宪法 🟡 P1

**核心内容**：

1. **Onboarding 文档层级**
   ```
   docs/
   ├── QUICK-START.md           # L1: 15分钟极速上手
   ├── onboarding/
   │   ├── week-1-foundation.md  # L2: 基础理解
   │   ├── week-2-development.md # L3: 开发实践
   │   ├── week-3-architecture.md# L4: 架构深入
   │   └── week-4-contribution.md# L5: 独立贡献
   ```

2. **周期性审计**
   - 每月审计清单：环境搭建、工具版本、代码示例、关键 ADR

3. **新人反馈机制**
   - 标准化反馈表：准确性评分、遇到障碍、改进建议

4. **成功标准**
   - 明确定义 Onboarding 完成标准
   - 包括：运行测试、理解 ADR、创建用例、提交 PR

5. **责任人制度**
   - CODEOWNERS 指定 Onboarding 文档负责人

---

### ADR-951：案例库管理规范 🟡 P1

**核心内容**：

1. **案例库结构**
   ```
   docs/cases/
   ├── module-communication/
   ├── testing/
   └── refactoring/
   ```

2. **案例文档标准**
   - 包含：适用场景、相关 ADR、难度、作者、日期
   - 格式：背景、解决方案、代码示例、常见陷阱

3. **审核标准**
   - 必须符合 ADR
   - 代码必须可运行
   - 必须经过 Code Review

---

### ADR-952：工程标准与 ADR 分离边界 🟡 P1

**核心内容**：

1. **层级定义**
   - L1 ADR：定义架构约束
   - L2 Engineering Standard：细化实施标准
   - L3 Best Practice：推荐做法

2. **关系规则**
   - Standard 必须基于 ADR
   - Standard 禁止引入新约束
   - 冲突时以 ADR 为准

---

### ADR-970：自动化工具日志集成标准 🟡 P1

**核心内容**：

1. **日志分类**
   | 类型 | 存储位置 | 保留期 |
   |------|----------|--------|
   | 架构测试报告 | `docs/reports/architecture-tests/` | 30天 |
   | 依赖更新日志 | `docs/reports/dependencies/` | 180天 |
   | CodeQL 报告 | `docs/reports/security/` | 永久 |

2. **结构化日志格式**（JSON）
   - 包含：type, timestamp, test, adr, severity, message, file, line, fix_guide

3. **日志与 ADR 关联**
   - 测试失败自动链接对应 ADR
   - ADR 列出相关测试和日志位置

---

### ADR-990：文档演进路线图管理规范 🟡 P1

**核心内容**：

1. **路线图结构**
   - 按季度组织：Q1/Q2/Q3/Q4
   - 长期愿景：2027+

2. **更新机制**
   - 每季度更新
   - 流程：团队提案 → 架构评审 → 更新路线图

3. **与 ADR 关联**
   - 项目标注对应 ADR/RFC
   - ADR 修订时更新路线图状态

---

### ADR-945：ADR 全局时间线与演进视图 🟢 P2

**核心内容**：

1. **时间线生成工具**
   - 自动提取 ADR 版本历史
   - 输出：Markdown + Mermaid 甘特图

2. **演进分析**
   - 统计变更频率
   - 识别高频修改的 ADR

---

### ADR-955：文档搜索与可发现性优化 🟢 P2

**核心内容**：

1. **搜索索引**
   - 自动生成关键词索引

2. **标签系统**
   - 为 ADR 添加标签

3. **智能跳转**
   - 基于关系声明生成相关 ADR 链接

---

### ADR-965：Onboarding 互动式学习路径 🟢 P2

**核心内容**：

1. **互动式清单**
   - GitHub Issue Template

2. **学习路径可视化**
   - Mermaid 流程图

3. **进度跟踪**
   - Issue 打钩标记完成

---

### ADR-975：文档质量指标与监控 🟢 P2

**核心内容**：

1. **质量指标**
   - 准确性：>95%
   - 完整性：>90%
   - 时效性：<7天
   - 可查找性：<2分钟

2. **自动化检测**
   - 链接有效性
   - 代码示例可编译性

3. **定期报告**
   - 每月质量报告

---

## 实施路线图

### 三阶段实施计划

#### 阶段 1（Week 1-2）：🔴 P0 基础设施

**交付物**：
- [ ] ADR-940 + 关系图生成工具
- [ ] ADR-980 + 版本同步检测测试
- [ ] ADR-950 + 至少 2 个 Guide 和 1 个 FAQ

**工时**：10-12 天  
**责任人**：架构委员会 + Tech Lead

#### 阶段 2（Week 3-5）：🟡 P1 体系完善

**交付物**：
- [ ] ADR-960 + Onboarding 互动清单
- [ ] ADR-951 + 至少 5 个案例
- [ ] ADR-952 + 工程标准模板
- [ ] ADR-970 + 日志结构化标准
- [ ] ADR-990 + 首版路线图

**工时**：14-16 天  
**责任人**：Tech Lead + 团队成员

#### 阶段 3（Week 6-8）：🟢 P2 体验优化

**交付物**：
- [ ] ADR-945 + 时间线生成工具
- [ ] ADR-955 + 关键词索引
- [ ] ADR-965 + Issue Template
- [ ] ADR-975 + 质量监控仪表盘

**工时**：13-15 天  
**责任人**：团队成员

### 总工时：37-43 天（8 周）

---

## 风险与依赖

### 主要风险

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| 团队资源不足 | 中 | 高 | 分阶段，P0 优先 |
| 现有 ADR 需修订 | 高 | 中 | 同步修订 |
| 工具开发复杂度超预期 | 中 | 中 | 优先手动流程 |
| 团队习惯改变阻力 | 低 | 中 | 培训和文档支持 |

### 关键依赖

```
ADR-0008 → ADR-940, ADR-950
ADR-900 → ADR-980
ADR-940 → ADR-945
ADR-950 → ADR-960, ADR-951, ADR-952
ADR-960 → ADR-965
ADR-0000 → ADR-970
ADR-0008 → ADR-975
```

### 成功标准

**阶段 1**：
- ✅ 所有 ADR 包含关系声明
- ✅ 版本同步检测通过
- ✅ 至少 2 个 Guide + 1 个 FAQ

**阶段 2**：
- ✅ Onboarding 完成首次审计
- ✅ 案例库包含至少 5 个案例
- ✅ 日志标准应用于至少 1 个工具

**阶段 3**：
- ✅ 时间线自动生成
- ✅ 文档搜索 <2 分钟
- ✅ 质量监控上线

---

## 附录

### A. 快速参考表

| 编号 | 名称 | 优先级 | 工时 | 依赖 |
|------|------|--------|------|------|
| ADR-940 | ADR 关系与溯源管理 | 🔴 P0 | 2-3天 | 无 |
| ADR-980 | 生命周期同步机制 | 🔴 P0 | 3-4天 | 无 |
| ADR-950 | 指南与 FAQ 治理 | 🔴 P0 | 2-3天 | ADR-0008 |
| ADR-960 | Onboarding 治理 | 🟡 P1 | 3-4天 | ADR-950 |
| ADR-951 | 案例库管理 | 🟡 P1 | 1-2天 | ADR-950 |
| ADR-952 | 工程标准边界 | 🟡 P1 | 1-2天 | ADR-950 |
| ADR-970 | 日志集成标准 | 🟡 P1 | 3-4天 | ADR-0000 |
| ADR-990 | 演进路线图 | 🟡 P1 | 1-2天 | ADR-900 |
| ADR-945 | 时间线与演进视图 | 🟢 P2 | 2-3天 | ADR-940 |
| ADR-955 | 搜索优化 | 🟢 P2 | 2-3天 | ADR-940 |
| ADR-965 | 互动式学习路径 | 🟢 P2 | 2-3天 | ADR-960 |
| ADR-975 | 质量指标监控 | 🟢 P2 | 3-4天 | ADR-0008 |

### B. 参考资料

- [ADR-0008：文档编写与维护宪法](../constitutional/ADR-0008-documentation-governance-constitution.md)
- [ADR-900：ADR 新增与修订流程](../governance/ADR-900-adr-process.md)
- [ADR-910：README 编写与维护宪法](../governance/ADR-910-readme-governance-constitution.md)
- [ADR-920：示例代码治理宪法](../governance/ADR-920-examples-governance-constitution.md)

---

## 变更历史

| 版本 | 日期 | 变更说明 | 作者 |
|------|------|----------|------|
| 1.0 | 2026-01-26 | 初版：识别 5 大空白领域，提出 12 项建设建议 | GitHub Copilot |

---

**维护**：架构委员会  
**审核**：待定  
**状态**：📋 Proposal


---

## References（非裁决性参考）


- 待补充


---

## Relationships（关系声明）


**依赖（Depends On）**：
- 待补充

**被依赖（Depended By）**：
- 待补充

**替代（Supersedes）**：
- 无

**被替代（Superseded By）**：
- 无

**相关（Related）**：
- 待补充


---

## Prohibited（禁止行为）


以下行为明确禁止：

- 待补充


---

## Non-Goals（明确不管什么）


本 ADR 明确不涉及以下内容：

- 待补充


---

## Enforcement（执法模型）


### 执行方式

待补充...


---

## Decision（裁决）


> ⚠️ **本节是唯一裁决来源，其他章节不得产生新规则。**

### 待补充规则

待补充...


---

## Glossary（术语表）


| 术语 | 定义 | 英文对照 |
|------|------|----------|
| 待补充 | 待补充 | TBD |


---

## Focus（聚焦内容）


本 ADR 聚焦于...


---

## History（版本历史）


| 版本  | 日期         | 变更说明   |
|-----|------------|--------|
| 1.0 | 待补充 | 初始版本 |
