---
adr: ADR-940
title: "ADR å…³ç³»ä¸æº¯æºç®¡ç†æ²»ç†è§„èŒƒ"
status: Accepted
level: Governance
deciders: "Architecture Board"
date: 2026-02-03
version: "2.0"
author: "GitHub Copilot"
maintainer: "æ¶æ„å§”å‘˜ä¼š"
reviewer: "@douhuaa"
supersedes: null
superseded_by: null
---

# ADR-940ï¼šADR å…³ç³»ä¸æº¯æºç®¡ç†æ²»ç†è§„èŒƒ

> âš–ï¸ **æœ¬ ADR æ˜¯æ‰€æœ‰ ADR å…³ç³»å£°æ˜çš„æ²»ç†è§„èŒƒï¼Œå®šä¹‰ ADR ä¹‹é—´å…³ç³»çš„æ ‡å‡†åŒ–ç®¡ç†æœºåˆ¶ã€‚**

## Focusï¼ˆèšç„¦å†…å®¹ï¼‰

- ADR å…³ç³»ç±»å‹å®šä¹‰ä¸æ ‡å‡†åŒ–
- å…³ç³»å£°æ˜çš„å¼ºåˆ¶æ ¼å¼
- å…³ç³»åŒå‘ä¸€è‡´æ€§éªŒè¯
- å¾ªç¯ä¾èµ–æ£€æµ‹
- å…¨å±€å…³ç³»å›¾ç”Ÿæˆæœºåˆ¶

---

## Glossaryï¼ˆæœ¯è¯­è¡¨ï¼‰

| æœ¯è¯­ | å®šä¹‰ | è‹±æ–‡å¯¹ç…§ |
|------|------|----------|
| å…³ç³»å£°æ˜ | ADR æ–‡æ¡£ä¸­å£°æ˜ä¸å…¶ä»– ADR å…³ç³»çš„ç« èŠ‚ | Relationship Declaration |
| ä¾èµ–å…³ç³» | æœ¬ ADR åŸºäºå¦ä¸€ ADR çš„è§„åˆ™æˆ–æ¦‚å¿µ | Dependency |
| è¢«ä¾èµ–å…³ç³» | å…¶ä»– ADR åŸºäºæœ¬ ADR | Depended By |
| æ›¿ä»£å…³ç³» | æœ¬ ADR å–ä»£å¦ä¸€ä¸ªå·²åºŸå¼ƒçš„ ADR | Supersedes |
| è¢«æ›¿ä»£å…³ç³» | æœ¬ ADR å·²è¢«æ–° ADR å–ä»£ | Superseded By |
| ç›¸å…³å…³ç³» | ä¸æœ¬ ADR ç›¸å…³ä½†ä¸å­˜åœ¨ä¾èµ– | Related |
| åŒå‘ä¸€è‡´æ€§ | A ä¾èµ– B åˆ™ B å¿…é¡»å£°æ˜è¢« A ä¾èµ– | Bidirectional Consistency |
| å…³ç³»å›¾ | ADR ä¹‹é—´å…³ç³»çš„å¯è§†åŒ–è¡¨ç¤º | Relationship Map |

---

## Decisionï¼ˆè£å†³ï¼‰

> âš ï¸ **æœ¬èŠ‚ä¸ºå”¯ä¸€è£å†³æ¥æºï¼Œæ‰€æœ‰æ¡æ¬¾å…·å¤‡æ‰§è¡Œçº§åˆ«**  
> æœ¬ ADR ä»…åœ¨ ADR-#### ç»“æ„åˆè§„çš„å‰æä¸‹ç”Ÿæ•ˆã€‚ä¸åˆè§„çš„ ADR è§†ä¸ºä¸å­˜åœ¨ï¼Œå…¶å…³ç³»ä¸è¿›å…¥æœ¬ ADR çš„è£å†³èŒƒå›´ã€‚

> ğŸ”’ **ç»Ÿä¸€é“å¾‹**ï¼šADR-940 ä¸­ï¼Œæ‰€æœ‰å¯æ‰§æ³•æ¡æ¬¾å¿…é¡»å…·å¤‡ç¨³å®š RuleIdï¼Œæ ¼å¼ä¸ºï¼š
> ```
> ADR-940_<Rule>_<Clause>
> ```

---

### ADR-940_1ï¼šå…³ç³»å£°æ˜ç« èŠ‚è¦æ±‚

#### ADR-940_1_1 æ¯ä¸ª ADR å¿…é¡»åŒ…å«å…³ç³»å£°æ˜ç« èŠ‚

**è§„åˆ™**ï¼š

- æ‰€æœ‰ ADR **å¿…é¡»**åŒ…å«â€œå…³ç³»å£°æ˜ï¼ˆRelationshipsï¼‰â€ç« èŠ‚
- ä½ç½®ï¼šä½äºâ€œå†³ç­–ï¼ˆDecisionï¼‰â€ç« èŠ‚ä¹‹å
- ç¼ºå¤±æˆ–ä½ç½®é”™è¯¯ â†’ âŒè¿è§„

**åˆ¤å®š**ï¼š

| æ¡ä»¶ | åˆ¤å®š |
|------|------|
| ç¼ºå°‘å…³ç³»å£°æ˜ç« èŠ‚ | âŒè¿è§„ |
| ç« èŠ‚ä½ç½®ä¸æ­£ç¡® | âŒè¿è§„ |
| å®Œæ•´ä¸”ä½ç½®æ­£ç¡® | âœ…åˆè§„ |

---

### ADR-940_2ï¼šå…³ç³»ç±»å‹å®šä¹‰ä¸çº¦æŸ

#### ADR-940_2_1 å…³ç³»ç±»å‹å®šä¹‰ä¸ä½¿ç”¨çº¦æŸ

**è§„åˆ™**ï¼š

| å…³ç³»ç±»å‹ | å®šä¹‰ | ä½¿ç”¨åœºæ™¯ | å¼ºåˆ¶åŒå‘ |
|---------|------|----------|----------|
| Depends On | æœ¬ ADR åŸºäºå¦ä¸€ ADR | ADR-#### ä¾èµ– ADR-#### | âœ… |
| Depended By | å…¶ä»– ADR åŸºäºæœ¬ ADR | ADR-#### è¢« ADR-#### ä¾èµ– | âœ… |
| Supersedes | æœ¬ ADR å–ä»£å·²åºŸå¼ƒ ADR | ADR-####-v2 æ›¿ä»£ ADR-####-v1 | âœ… |
| Superseded By | æœ¬ ADR å·²è¢«æ–° ADR æ›¿ä»£ | ADR-####-v1 è¢« ADR-####-v2 æ›¿ä»£ | âœ… |
| Related | ä¸æœ¬ ADR ç›¸å…³ä½†ä¸å­˜åœ¨ä¾èµ– | ADR-#### ä¸ ADR-#### | âŒ |

**è£å†³æ€§çº¦æŸ**ï¼š

- å·²åºŸå¼ƒ ADR **ç¦æ­¢**è¢«æ–° ADR ä¾èµ–
- è¿åæ­¤è§„åˆ™çš„ PR **å¿…é¡»**æ‹’ç»åˆå¹¶

**åˆ¤å®š**ï¼š

| æ¡ä»¶ | åˆ¤å®š |
|------|------|
| ä½¿ç”¨æœªå®šä¹‰çš„å…³ç³»ç±»å‹ | âŒè¿è§„ |
| ä¾èµ–/æ›¿ä»£å…³ç³»æœªåŒå‘å£°æ˜ | âŒè¿è§„ |
| æ–° ADR ä¾èµ–å·²åºŸå¼ƒ ADR | âŒè¿è§„ |
| å…³ç³»ç±»å‹æ­£ç¡®ä¸”åŒå‘ä¸€è‡´ | âœ…åˆè§„ |

---

### ADR-940_3ï¼šå…³ç³»ä¸€è‡´æ€§éªŒè¯

#### ADR-940_3_1 åŒå‘ä¸€è‡´æ€§

**è§„åˆ™**ï¼š

- ä¾èµ–å…³ç³»ï¼šA ä¾èµ– B â†’ B å¿…é¡»å£°æ˜è¢« A ä¾èµ–
- æ›¿ä»£å…³ç³»ï¼šA æ›¿ä»£ B â†’ B å¿…é¡»å£°æ˜è¢« A æ›¿ä»£
- ç›¸å…³å…³ç³»ä¸è¦æ±‚åŒå‘ï¼Œä½†å»ºè®®åŒå‘å£°æ˜
- CI è‡ªåŠ¨éªŒè¯ï¼Œè¿è§„é˜»æ–­æ„å»º

**åˆ¤å®š**ï¼š

| æ¡ä»¶ | åˆ¤å®š |
|------|------|
| åŒå‘ä¸€è‡´æ€§è¿å | âŒé˜»æ–­ |
| åŒå‘ä¸€è‡´ | âœ…åˆè§„ |

---

### ADR-940_4ï¼šå¾ªç¯ä¾èµ–æ²»ç†

#### ADR-940_4_1 å¾ªç¯ä¾èµ–ç¦æ­¢

**è§„åˆ™**ï¼š

- ADR ç¦æ­¢å½¢æˆå¾ªç¯ä¾èµ–ï¼š
  - ADR-A â†’ ADR-B â†’ ADR-A
  - ADR-A â†’ ADR-B â†’ ADR-C â†’ ADR-A
- CI è‡ªåŠ¨æ£€æµ‹ï¼Œè¿è§„é˜»æ–­æ„å»º
- è§£å†³æ–¹æ¡ˆï¼š
  - æå–å…¬å…±è§„åˆ™
  - é‡æ–°è®¾è®¡ä¾èµ–
  - æ”¹ä¸ºç›¸å…³å…³ç³»

**åˆ¤å®š**ï¼š

| æ¡ä»¶ | åˆ¤å®š |
|------|------|
| å­˜åœ¨å¾ªç¯ä¾èµ– | âŒé˜»æ–­ |
| æ— å¾ªç¯ä¾èµ– | âœ…åˆè§„ |

---

### ADR-940_5ï¼šå…³ç³»å¯è§†åŒ–

#### ADR-940_5_1 å…¨å±€å…³ç³»å›¾ç”Ÿæˆ

**è§„åˆ™**ï¼š

- ä½ç½®ï¼š`docs/adr/ADR-RELATIONSHIP-MAP.md`
- å†…å®¹ï¼šMermaid å›¾ + è¡¨æ ¼
- æ¯æ¬¡ ADR å˜æ›´åå¿…é¡»æ›´æ–°
- åˆ†å±‚å…³ç³»å›¾ï¼šå®ªæ³•/æ²»ç†/ç»“æ„/è¿è¡Œ/æŠ€æœ¯
- çŠ¶æ€å…³ç³»å›¾ï¼šActive / Superseded / Deprecated

**Mermaid ç¤ºä¾‹**ï¼š

```mermaid
graph TB
    ADR0001[ADR-####: æ¨¡å—åŒ–æ¶æ„] --> ADR0005[ADR-####: äº¤äº’æ¨¡å‹]
    ADR0005 --> ADR0201[ADR-####: Handler ç”Ÿå‘½å‘¨æœŸ]

    style ADR0001 fill:#90EE90
    style ADR0005 fill:#87CEEB
    style ADR0201 fill:#FFD700
````

**åˆ¤å®š**ï¼š

|æ¡ä»¶|åˆ¤å®š|
|---|---|
|å…³ç³»å›¾ç¼ºå¤±æˆ–è¿‡æ—¶|âš ï¸è­¦å‘Š|
|å…³ç³»å›¾å‡†ç¡®|âœ…åˆè§„|

---

## Enforcementï¼ˆæ‰§æ³•æ¨¡å‹ï¼‰

|è§„åˆ™ç¼–å·|æ‰§è¡Œçº§|æµ‹è¯•/æ‰‹æ®µ|Decision æ˜ å°„|
|---|---|---|---|
|ADR-940_1_1|L1|`ADR_940_1_1_Relationship_Section_Required`|Â§ADR-940_1_1|
|ADR-940_2_1|L1|`ADR_940_2_1_Relationship_Types_Valid`|Â§ADR-940_2_1|
|ADR-940_2_1 å·²åºŸå¼ƒçº¦æŸ|L1|`ADR_940_2_1_No_Superseded_ADR_Dependency`|Â§ADR-940_2_1|
|ADR-940_3_1|L1|`ADR_940_3_1_Bidirectional_Consistency`|Â§ADR-940_3_1|
|ADR-940_4_1|L1|`ADR_940_4_1_No_Circular_Dependencies`|Â§ADR-940_4_1|
|ADR-940_5_1|L2|`scripts/generate-adr-relationship-map.sh`|Â§ADR-940_5_1|

**æ‰§è¡Œçº§åˆ«è¯´æ˜**ï¼š

- L1ï¼ˆç»“æ„è¿è§„ï¼‰ï¼šè¿å â†’ CI é˜»æ–­ï¼ŒPR æ— æ³•åˆå¹¶
- L2ï¼ˆæ²»ç†è­¦å‘Šï¼‰ï¼šä»…è®°å½•ï¼Œä¸é˜»æ–­åˆå¹¶

**è£å†³è¾¹ç•Œ**ï¼š

- å…³ç³»å£°æ˜ç¼ºå¤± â†’ é˜»æ–­
- å…³ç³»ç±»å‹é”™è¯¯ â†’ é˜»æ–­
- æ–° ADR ä¾èµ–åºŸå¼ƒ ADR â†’ é˜»æ–­
- åŒå‘ä¸€è‡´æ€§è¿è§„ â†’ é˜»æ–­
- å¾ªç¯ä¾èµ– â†’ é˜»æ–­
- å…³ç³»å›¾æœªç”Ÿæˆ â†’ è­¦å‘Š

---

## Non-Goalsï¼ˆæ˜ç¡®ä¸ç®¡ä»€ä¹ˆï¼‰

æœ¬ ADR æ˜ç¡®ä¸æ¶‰åŠä»¥ä¸‹å†…å®¹ï¼š

- ADR æ–‡æ¡£å†…å®¹çš„è¯­ä¹‰æ ¡éªŒï¼ˆç”± ADR-#### ç®¡ç†ï¼‰
- ADR æ–‡æ¡£çš„å®¡æ‰¹æµç¨‹ï¼ˆç”± ADR-#### ç®¡ç†ï¼‰
- æ–‡æ¡£ç¼–å†™çš„å…·ä½“è§„èŒƒï¼ˆç”± ADR-#### ç®¡ç†ï¼‰
- å…³ç³»å›¾çš„å…·ä½“æ¸²æŸ“æ ·å¼ï¼ˆç”±å·¥å…·è‡ªè¡Œå†³å®šï¼‰

---

## Prohibitedï¼ˆç¦æ­¢è¡Œä¸ºï¼‰

ä»¥ä¸‹è¡Œä¸ºæ˜ç¡®ç¦æ­¢ï¼š

- **ç¦æ­¢**åˆ›å»ºå¾ªç¯ä¾èµ–å…³ç³»
- **ç¦æ­¢**åœ¨ Final/Active ADR ä¸­ç¼ºå¤± Relationships ç« èŠ‚
- **ç¦æ­¢**ä½¿ç”¨æœªå®šä¹‰çš„å…³ç³»ç±»å‹
- **ç¦æ­¢**åœ¨å…³ç³»å£°æ˜ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- **ç¦æ­¢**æ–° ADR ä¾èµ–å·²åºŸå¼ƒçš„ ADR

---

## Relationshipsï¼ˆå…³ç³»å£°æ˜ï¼‰

**Depends On**ï¼š
- [ADR-900ï¼šæ¶æ„æµ‹è¯•ä¸ CI æ²»ç†å…ƒè§„åˆ™](https://chatgpt.com/c/ADR-900-architecture-tests.md)
- [ADR-008ï¼šæ–‡æ¡£ç¼–å†™ä¸ç»´æŠ¤å®ªæ³•](https://chatgpt.com/constitutional/ADR-008-documentation-governance-constitution.md)
- [ADR-900ï¼šADR æ–°å¢ä¸ä¿®è®¢æµç¨‹](https://chatgpt.com/c/ADR-900-architecture-tests.md)

**Depended By**ï¼š
- [ADR-945ï¼šADR å…¨å±€æ—¶é—´çº¿ä¸æ¼”è¿›è§†å›¾](https://chatgpt.com/c/ADR-945-adr-timeline-evolution-view.md)
- [ADR-946ï¼šADR æ ‡é¢˜çº§åˆ«å³è¯­ä¹‰çº§åˆ«çº¦æŸ](https://chatgpt.com/c/ADR-946-adr-heading-level-semantic-constraint.md)
- [ADR-947ï¼šå…³ç³»å£°æ˜åŒºçš„ç»“æ„ä¸è§£æå®‰å…¨è§„åˆ™](https://chatgpt.com/c/ADR-947-relationship-section-structure-parsing-safety.md)
- [ADR-955ï¼šæ–‡æ¡£æœç´¢ä¸å¯å‘ç°æ€§ä¼˜åŒ–](https://chatgpt.com/c/ADR-955-documentation-search-discoverability.md)
- [ADR-980ï¼šADR ç”Ÿå‘½å‘¨æœŸä¸€ä½“åŒ–åŒæ­¥æœºåˆ¶æ²»ç†è§„èŒƒ](https://chatgpt.com/c/ADR-980-adr-lifecycle-synchronization.md)

**Supersedes**ï¼š
- æ— 

**Superseded By**ï¼š
- æ— 

**Related**ï¼š
- [ADR-006ï¼šæœ¯è¯­ä¸ç¼–å·å®ªæ³•](https://chatgpt.com/constitutional/ADR-006-terminology-numbering-constitution.md)
- [ADR-008ï¼šæ–‡æ¡£ç¼–å†™ä¸ç»´æŠ¤å®ªæ³•](https://chatgpt.com/constitutional/ADR-008-documentation-governance-constitution.md)
- [ADR-946ï¼šæ ‡é¢˜è¯­ä¹‰çº¦æŸ](https://chatgpt.com/c/ADR-946-adr-heading-level-semantic-constraint.md)

---

## Referencesï¼ˆéè£å†³æ€§å‚è€ƒï¼‰

**å·¥å…·å’Œè„šæœ¬**ï¼š

- `scripts/verify-adr-relationships.sh`

- `scripts/check-relationship-consistency.sh`

- `scripts/detect-circular-dependencies.sh`

- `scripts/generate-adr-relationship-map.sh`


**ç›¸å…³æ–‡æ¡£**ï¼š

- [ADR å…³ç³»å›¾](https://chatgpt.com/ADR-RELATIONSHIP-MAP.md)

- [ADR æ¨¡æ¿](https://chatgpt.com/templates/adr-template.md)

---

## Historyï¼ˆç‰ˆæœ¬å†å²ï¼‰

|ç‰ˆæœ¬|æ—¥æœŸ|å˜æ›´è¯´æ˜|ä½œè€…|
|---|---|---|---|
|2.0|2026-02-03|å¯¹é½ ADR-907 v2.0ï¼Œå¼•å…¥ Rule/Clause åŒå±‚ç¼–å·ä½“ç³»|Architecture Board|
|1.0|2026-01-26|åˆå§‹ç‰ˆæœ¬ï¼Œå®šä¹‰ ADR å…³ç³»ç®¡ç†æœºåˆ¶|GitHub Copilot|
