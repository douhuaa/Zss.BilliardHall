# ADR-950：指南与 FAQ 文档治理宪法

> ⚖️ **本 ADR 是所有非裁决性文档（Guide、FAQ、Case、Standard）的唯一治理标准，定义其与 ADR 的分离边界。**

**状态**：✅ Accepted（已采纳）  
**级别**：治理层 / 架构元规则  
**适用范围**：所有指南、FAQ、案例和工程标准文档  
**生效时间**：即刻

---

## 聚焦内容（Focus）

- 文档类型定义与权威关系
- ADR 与非裁决性文档的分离边界
- 各类文档的结构标准
- 定期审计机制
- 禁止行为清单

---

## 术语表（Glossary）

| 术语 | 定义 | 英文对照 |
|------|------|----------|
| 裁决性文档 | 定义架构约束和规则的文档（ADR） | Decision Document |
| 非裁决性文档 | 解释、指导、示例类文档 | Non-Decision Document |
| Guide | 操作指南，解释如何应用 ADR | Guide |
| FAQ | 常见问题解答 | Frequently Asked Questions |
| Case | 实践案例库 | Case Study |
| Standard | 工程标准，细化 ADR 实施细节 | Engineering Standard |
| 分离边界 | ADR 与其他文档的内容划分界限 | Separation Boundary |

---

## 决策（Decision）

### 文档类型定义与权威关系（ADR-950.1）

**规则**：

| 类型 | 目的 | 允许定义规则 | 更新频率 | 位置 | 裁决力 |
|------|------|------------|----------|------|--------|
| **ADR** | 定义约束 | ✅ 是 | 很少 | `docs/adr/` | ✅ 有 |
| **Guide** | 解释应用 | ❌ 否 | 随 ADR 变更 | `docs/guides/` | ❌ 无 |
| **FAQ** | 解答问题 | ❌ 否 | 按需 | `docs/faqs/` | ❌ 无 |
| **Case** | 记录案例 | ❌ 否 | 按需 | `docs/cases/` | ❌ 无 |
| **Standard** | 工程标准 | ⚠️ 有限 | 按需 | `docs/engineering-standards/` | ⚠️ 有限 |

**权威关系**：
```
ADR（宪法层，最高权威）
 ↓ 解释和指导
Guide（操作指南）
 ↓ 快速查询
FAQ（常见问题）
 ↓ 实践示例
Case（案例库）

ADR ← 基于
Standard（工程标准，不得引入新约束）
```

**核心原则**：
> ADR 定义"是什么"和"必须/禁止"  
> Guide 解释"怎么做"  
> FAQ 解答"为什么"和"如何理解"  
> Case 展示"实践示例"  
> Standard 细化"实施细节"但不得超越 ADR

**判定**：
- ❌ Guide 中定义新架构规则
- ❌ FAQ 中覆盖 ADR 决策
- ✅ Guide 引用 ADR 并提供操作步骤

---

### ADR 与非裁决性文档的分离边界（ADR-950.2）

**规则**：

**何时写 ADR**：
- ✅ 定义架构约束
- ✅ 引入新术语
- ✅ 需要测试执行的规则
- ✅ 不可协商的决策
- ✅ 影响系统全局的决定

**何时写 Guide**：
- ✅ 解释如何应用 ADR
- ✅ 操作步骤说明
- ✅ 工具使用教程
- ✅ 多步骤流程

**何时写 FAQ**：
- ✅ 解答常见疑问
- ✅ 澄清容易混淆的概念
- ✅ 快速参考
- ✅ 故障排查

**何时写 Case**：
- ✅ 记录实际问题和解决方案
- ✅ 展示最佳实践
- ✅ 反模式警告
- ✅ 复杂场景示例

**何时写 Standard**：
- ⚠️ 细化 ADR 的实施细节
- ⚠️ 工具配置标准
- ⚠️ 代码风格约定
- ⚠️ 必须基于 ADR，不能引入新约束

**决策树**：
```
问题：需要文档化某个内容
├─ 是否定义架构约束？
│  ├─ 是 → 写 ADR
│  └─ 否 ↓
├─ 是否需要测试执行？
│  ├─ 是 → 写 ADR
│  └─ 否 ↓
├─ 是否解释如何操作？
│  ├─ 是 → 写 Guide
│  └─ 否 ↓
├─ 是否解答常见问题？
│  ├─ 是 → 写 FAQ
│  └─ 否 ↓
├─ 是否记录实践案例？
│  ├─ 是 → 写 Case
│  └─ 否 ↓
└─ 是否细化工程实施？
   ├─ 是 → 写 Standard
   └─ 否 → 重新评估是否需要文档化
```

**判定**：
- ❌ 在 Guide 中定义"模块必须隔离"
- ❌ 在 ADR 中包含详细操作步骤
- ✅ ADR 定义规则，Guide 提供操作步骤

---

### 文档结构标准（ADR-950.3）

**规则**：

**Guide 标准结构**：
```markdown
# 指南：标题

**目的**：[一句话说明]  
**相关 ADR**：[ADR-XXXX 链接]  
**前置条件**：[需要了解的内容]  
**适用场景**：[何时使用本指南]

---

## 步骤

### 步骤 1：[步骤标题]

[详细说明]

```bash
# 命令示例
```

### 步骤 2：[步骤标题]

...

---

## 示例

[完整可运行的代码或操作示例]

---

## 常见问题

**Q1**：[问题]  
**A**：[答案]

---

## 参考

- [ADR-XXXX](链接)
- [相关 Guide](链接)
```

**FAQ 标准结构**：
```markdown
# FAQ：主题

**相关 ADR**：[ADR-XXXX 链接]  
**最后更新**：YYYY-MM-DD

---

## 分类 1：[分类名称]

### Q1：[问题]

**A**：[答案]

**参考**：[ADR-XXXX 第 X 节]

---

### Q2：[问题]

...

---

## 分类 2：[分类名称]

...
```

**Case 标准结构**：
```markdown
# 案例：标题

**适用场景**：[说明]  
**相关 ADR**：[ADR-XXXX 链接]  
**难度**：简单/中等/困难  
**作者**：[作者名]  
**日期**：YYYY-MM-DD

---

## 背景

[问题描述]

---

## 解决方案

[方案说明]

---

## 代码示例

```csharp
// 完整可运行的代码
```

---

## 常见陷阱

- ❌ [错误做法]
- ✅ [正确做法]

---

## 相关案例

- [案例 1](链接)
```

**判定**：
- ❌ 文档结构不符合标准
- ❌ 缺少必需章节
- ✅ 文档结构完整且符合标准

---

### 定期审计机制（ADR-950.4）

**规则**：

**审计频率**：
- Guide：每季度审核与 ADR 同步性
- FAQ：每半年审核相关性
- Case：每年审核代码有效性
- Standard：每季度审核与 ADR 一致性

**审计清单**：

**Guide 审计**：
- [ ] 引用的 ADR 是否还有效
- [ ] 步骤是否与当前实践一致
- [ ] 代码示例是否可运行
- [ ] 工具版本是否需要更新

**FAQ 审计**：
- [ ] 问题是否仍然常见
- [ ] 答案是否准确
- [ ] ADR 引用是否有效
- [ ] 是否有新的常见问题需要添加

**Case 审计**：
- [ ] 代码是否符合当前 ADR
- [ ] 是否有更好的解决方案
- [ ] 是否需要标记为过时

**Standard 审计**：
- [ ] 是否与 ADR 一致
- [ ] 是否引入了未经 ADR 授权的约束
- [ ] 是否需要提升为 ADR

**审计记录**：
- 位置：`docs/audits/YYYY-QX-documentation-audit.md`
- 包含：审计日期、审计人、发现问题、行动计划

**判定**：
- ❌ 超过审计周期未审计
- ❌ 发现问题未记录或处理
- ✅ 按时审计并记录结果

---

### 禁止行为（ADR-950.5）

**规则**：

**禁止在 Guide/FAQ/Case 中**：
- ❌ 引入新的架构约束
- ❌ 定义新的术语（应在 ADR 中定义）
- ❌ 覆盖或削弱 ADR 规则
- ❌ 给出"变通方案"绕过 ADR
- ❌ 使用裁决性语言（"必须"/"禁止"）而不引用 ADR

**禁止在 ADR 中**：
- ❌ 包含详细的操作步骤（应移至 Guide）
- ❌ 包含大量示例代码（应移至 Case）
- ❌ 包含常见问题解答（应移至 FAQ）
- ❌ 包含工程实施细节（应移至 Standard）

**允许的引用方式**：
```markdown
✅ Guide 中："根据 ADR-0001，模块必须隔离。以下是实施步骤..."
✅ FAQ 中："Q: 为什么模块必须隔离？A: 根据 ADR-0001..."
❌ Guide 中："模块必须隔离"（无 ADR 引用）
```

**判定**：
- ❌ Guide 中无引用地使用裁决性语言
- ❌ ADR 中包含操作步骤
- ✅ 各类文档职责分明

---

## 执法模型（Enforcement）

### 测试映射

| 规则编号 | 执行级 | 测试/手段 |
|---------|--------|----------|
| ADR-950.1 | L2 | Manual Review |
| ADR-950.2 | L2 | Manual Review |
| ADR-950.3 | L2 | `scripts/verify-doc-structure.sh` |
| ADR-950.4 | L2 | 审计日历 + 自动提醒 |
| ADR-950.5 | L2 | Manual Review |

### 治理优先级（长期方向）

文档治理的长期演进方向：

**优先级排序**：
```
结构正确 > 权威正确 > 内容质量
```

**原因**：
- **结构正确**：确保文档可被工具处理、可导航、可维护
- **权威正确**：确保权限边界清晰、不发生文档僭越
- **内容质量**：确保信息准确、有用、及时

**避免陷阱**：
- ❌ 审计清单全绿，但文档无人阅读
- ❌ 形式主义审计，忽视实际价值
- ❌ 过度强调格式，忽视内容有用性

**判定重点**：
当文档数量增长时，优先保证结构和权威边界，而非每个文档的内容完美度。

---

## 破例与归还（Exception）

### 允许破例的前提

破例 **仅在以下情况允许**：
- 历史遗留文档需要时间重组

### 破例要求

每个破例 **必须**：
- 记录在 `ARCH-VIOLATIONS.md`
- 指定失效日期（不超过 3 个月）
- 给出重组计划

---

## 变更政策（Change Policy）

### 变更规则

- **新增文档类型**：需架构委员会批准
- **修改结构标准**：Tech Lead 可批准
- **修改审计频率**：Tech Lead 可批准

---

## 明确不管什么（Non-Goals）

本 ADR **不负责**：
- 文档内容质量（由审查流程保证）
- 具体写作风格（由 ADR-0008 管理）
- 文档发布流程

---

## 关系声明（Relationships）

**依赖（Depends On）**：
- [ADR-0008：文档编写与维护宪法](../constitutional/ADR-0008-documentation-governance-constitution.md) - 基础文档规范

**被依赖（Depended By）**：
- [ADR-951：案例库管理规范](ADR-951-case-repository-management.md) - Case 类型细化
- [ADR-952：工程标准与 ADR 分离边界](ADR-952-engineering-standard-adr-boundary.md) - Standard 类型细化
- [ADR-960：Onboarding 文档治理宪法](ADR-960-onboarding-documentation-governance.md) - Onboarding 文档规范

**替代（Supersedes）**：无

**被替代（Superseded By）**：无

**相关（Related）**：
- [ADR-910：README 编写与维护宪法](ADR-910-readme-governance-constitution.md) - README 是另一类非裁决性文档

---

## 非裁决性参考（References）

### 模板

- [Guide 模板](../../templates/guide-template.md)
- [FAQ 模板](../../templates/faq-template.md)
- [Case 模板](../../templates/case-template.md)
- [Standard 模板](../../templates/standard-template.md)

### 相关文档

- [文档类型决策树](../../guides/document-type-decision-tree.md)
- [审计清单](../../templates/documentation-audit-checklist.md)

---

## 版本历史

| 版本 | 日期 | 变更说明 | 作者 |
|------|------|----------|------|
| 1.0 | 2026-01-26 | 初始版本，定义非裁决性文档治理标准 | GitHub Copilot |

---

**维护**：架构委员会  
**审核**：@douhuaa  
**状态**：✅ Accepted
