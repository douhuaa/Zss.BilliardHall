---
adr: ADR-210
title: "é¢†åŸŸäº‹ä»¶ç‰ˆæœ¬åŒ–ä¸å…¼å®¹æ€§"
status: Final
level: Runtime
version: "4.0"
deciders: "Architecture Board"
date: 2026-02-06
maintainer: "Architecture Board"
primary_enforcement: L1
reviewer: "GitHub Copilot"
supersedes: null
superseded_by: null
---


# ADR-210ï¼šé¢†åŸŸäº‹ä»¶ç‰ˆæœ¬åŒ–ä¸å…¼å®¹æ€§

> âš–ï¸ **æœ¬ ADR å®šä¹‰é¢†åŸŸäº‹ä»¶çš„ç‰ˆæœ¬ç®¡ç†è§„åˆ™ï¼Œç¡®ä¿è·¨ç‰ˆæœ¬å…¼å®¹æ€§å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚**

**é€‚ç”¨èŒƒå›´**ï¼šæ‰€æœ‰é¢†åŸŸäº‹ä»¶  
## Focusï¼ˆèšç„¦å†…å®¹ï¼‰

- äº‹ä»¶ç ´åæ€§å˜æ›´ä¸ç‰ˆæœ¬æ§åˆ¶
- SchemaVersion å±æ€§è¦æ±‚
- æ—§ç‰ˆæœ¬äº‹ä»¶ä¿ç•™ç­–ç•¥
- è®¢é˜…è€…å¤šç‰ˆæœ¬å¤„ç†è¦æ±‚
- äº‹ä»¶åºåˆ—åŒ–å…¼å®¹æ€§
- ç‰ˆæœ¬å¼‚å¸¸å®¹é”™æœºåˆ¶

---

---

## Glossaryï¼ˆæœ¯è¯­è¡¨ï¼‰

| æœ¯è¯­ | å®šä¹‰ | è‹±æ–‡å¯¹ç…§ |
|-----|------|---------|
| ç ´åæ€§å˜æ›´ | å¯¼è‡´æ—§ç‰ˆæœ¬æ— æ³•æ­£å¸¸å¤„ç†çš„äº‹ä»¶å˜æ›´ | Breaking Change |
| SchemaVersion | äº‹ä»¶ä¸­æ ‡è¯†ç‰ˆæœ¬å·çš„å±æ€§ | Schema Version |
| è¯­ä¹‰åŒ–ç‰ˆæœ¬ | Major.Minor æ ¼å¼çš„ç‰ˆæœ¬å·ä½“ç³» | Semantic Versioning |
| å‘å‰å…¼å®¹ | æ–°ä»£ç èƒ½è¯»å–æ—§æ•°æ® | Forward Compatibility |
| æ´»è·ƒç‰ˆæœ¬ | å½“å‰ç³»ç»Ÿä¸­ä»åœ¨ä½¿ç”¨çš„äº‹ä»¶ç‰ˆæœ¬ | Active Version |
| æ­»ä¿¡é˜Ÿåˆ— | å­˜å‚¨æ— æ³•å¤„ç†æ¶ˆæ¯çš„é˜Ÿåˆ— | Dead Letter Queue |
| Fallback Handler | å¤„ç†æœªçŸ¥ç‰ˆæœ¬äº‹ä»¶çš„å…œåº•å¤„ç†å™¨ | Fallback Handler |

---

---

## Decisionï¼ˆè£å†³ï¼‰

> âš ï¸ **æœ¬èŠ‚ä¸ºå”¯ä¸€è£å†³æ¥æºï¼Œæ‰€æœ‰æ¡æ¬¾å…·å¤‡æ‰§è¡Œçº§åˆ«ã€‚**
> 
> ğŸ”’ **ç»Ÿä¸€é“å¾‹**ï¼š
> 
> ADR-210 ä¸­ï¼Œæ‰€æœ‰å¯æ‰§æ³•æ¡æ¬¾å¿…é¡»å…·å¤‡ç¨³å®š RuleIdï¼Œæ ¼å¼ä¸ºï¼š
> ```
> ADR-210_<Rule>_<Clause>
> ```

---

### ADR-210_1ï¼šç ´åæ€§å˜æ›´ä¸ç‰ˆæœ¬æ§åˆ¶ï¼ˆRuleï¼‰

#### ADR-210_1_1 ç ´åæ€§å˜æ›´å®šä¹‰

**è§„åˆ™**ï¼š
- ç ´åæ€§å˜æ›´å®šä¹‰ï¼š
  - âŒ åˆ é™¤å­—æ®µ
  - âŒ ä¿®æ”¹å­—æ®µç±»å‹
  - âŒ é‡å‘½åå­—æ®µ
  - âŒ æ·»åŠ å¿…éœ€å­—æ®µï¼ˆæ— é»˜è®¤å€¼ï¼‰
  
- éç ´åæ€§å˜æ›´ï¼š
  - âœ… æ·»åŠ å¯é€‰å­—æ®µï¼ˆæœ‰é»˜è®¤å€¼ï¼‰
  - âœ… æ·»åŠ æ–°çš„å¯é€‰å±æ€§
  
- ç‰ˆæœ¬å‘½åï¼š
  - âœ… `OrderCreated` â†’ `OrderCreatedV2` â†’ `OrderCreatedV3`
  - âŒ `OrderCreated2`ã€`OrderCreated_New`ï¼ˆä¸è§„èŒƒï¼‰

**åˆ¤å®š**ï¼š
- âŒ åˆ é™¤æˆ–ä¿®æ”¹ç°æœ‰äº‹ä»¶å­—æ®µ
- âŒ é‡å‘½åäº‹ä»¶ç±»å‹è€Œä¸åˆ›å»ºæ–°ç‰ˆæœ¬
- âŒ æ·»åŠ å¿…éœ€å­—æ®µæ— é»˜è®¤å€¼
- âŒ ç‰ˆæœ¬å‘½åä¸ç¬¦åˆè§„èŒƒ
- âœ… ç ´åæ€§å˜æ›´åˆ›å»ºæ–°ç‰ˆæœ¬äº‹ä»¶

---

---

### ADR-210_2ï¼šäº‹ä»¶ SchemaVersion è¦æ±‚ï¼ˆRuleï¼‰

#### ADR-210_2_1 SchemaVersion å±æ€§å¼ºåˆ¶è¦æ±‚

**è§„åˆ™**ï¼š
- æ‰€æœ‰é¢†åŸŸäº‹ä»¶å¿…é¡»åŒ…å« `SchemaVersion` å±æ€§
- ç‰ˆæœ¬å·æ ¼å¼ï¼šè¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼ˆMajor.Minorï¼‰
- ç ´åæ€§å˜æ›´é€’å¢ Major
- å…¼å®¹æ€§å˜æ›´é€’å¢ Minor

**åˆ¤å®š**ï¼š
- âŒ äº‹ä»¶ç±»å‹æ—  `SchemaVersion` å±æ€§
- âŒ ç‰ˆæœ¬å·æ ¼å¼ä¸ç¬¦åˆ Major.Minor
- âœ… äº‹ä»¶åŒ…å«æ­£ç¡®æ ¼å¼çš„ SchemaVersion

---

---

### ADR-210_3ï¼šæ—§ç‰ˆæœ¬ä¿ç•™ç­–ç•¥ï¼ˆRuleï¼‰

#### ADR-210_3_1 æ—§ç‰ˆæœ¬ä¿ç•™å‘¨æœŸè¦æ±‚

**è§„åˆ™**ï¼š
- æ—§ç‰ˆæœ¬äº‹ä»¶å¿…é¡»ä¿æŒè‡³å°‘ 2 ä¸ªå¤§ç‰ˆæœ¬å‘¨æœŸ
- V1 åˆ›å»ºåï¼Œè‡³å°‘ç­‰åˆ° V3 å‘å¸ƒæ‰èƒ½åˆ é™¤ V1
- åˆ é™¤å‰è‡³å°‘ä¸€ä¸ªç‰ˆæœ¬æ ‡è®°ä¸º `[Obsolete]`
- ç¦æ­¢ç«‹å³åˆ é™¤æ—§ç‰ˆæœ¬

**åºŸå¼ƒæµç¨‹**ï¼š
1. V2 å‘å¸ƒæ—¶ï¼š`[Obsolete("Use OrderCreatedV2", false)]`
2. V3 å‘å¸ƒæ—¶ï¼š`[Obsolete("Use OrderCreatedV2", true)]`ï¼ˆç¼–è¯‘é”™è¯¯ï¼‰
3. V4 å‘å¸ƒæ—¶ï¼šå¯åˆ é™¤ V1

**åˆ¤å®š**ï¼š
- âŒ æ–°ç‰ˆæœ¬å‘å¸ƒåç«‹å³åˆ é™¤æ—§ç‰ˆæœ¬
- âŒ åˆ é™¤æœªç» Obsolete æ ‡è®°çš„ç‰ˆæœ¬
- âŒ æœªæ»¡ 2 ä¸ªå¤§ç‰ˆæœ¬å‘¨æœŸåˆ é™¤
- âœ… éµå¾ªåºŸå¼ƒæµç¨‹å¹¶æ»¡è¶³ä¿ç•™å‘¨æœŸ

---

---

### ADR-210_4ï¼šè®¢é˜…è€…å¤šç‰ˆæœ¬å¤„ç†ï¼ˆRuleï¼‰

#### ADR-210_4_1 è®¢é˜…è€…å¤šç‰ˆæœ¬å¤„ç†è¦æ±‚

**è§„åˆ™**ï¼š
- è®¢é˜…è€…å¿…é¡»å¤„ç†æ‰€æœ‰æ´»è·ƒç‰ˆæœ¬
- å¤„ç†ç­–ç•¥ï¼š
  - âœ… æ–¹å¼ 1ï¼šä¸ºæ¯ä¸ªç‰ˆæœ¬åˆ›å»ºç‹¬ç«‹ Handler
  - âœ… æ–¹å¼ 2ï¼šåœ¨ Handler å†…éƒ¨è½¬æ¢ä¸ºç»Ÿä¸€ç‰ˆæœ¬
- ç¦æ­¢ä»…å¤„ç†æœ€æ–°ç‰ˆæœ¬è€Œå¿½ç•¥æ—§ç‰ˆæœ¬

**åˆ¤å®š**ï¼š
- âŒ Handler ä»…å¤„ç†æœ€æ–°ç‰ˆæœ¬
- âŒ Handler å¯¹æ—§ç‰ˆæœ¬æŠ›å‡ºå¼‚å¸¸
- âœ… Handler å¤„ç†æ‰€æœ‰æ´»è·ƒç‰ˆæœ¬

---

---

### ADR-210_5ï¼šäº‹ä»¶åºåˆ—åŒ–å…¼å®¹æ€§ï¼ˆRuleï¼‰

#### ADR-210_5_1 åºåˆ—åŒ–å‘å‰å…¼å®¹è¦æ±‚

**è§„åˆ™**ï¼š
- åºåˆ—åŒ–å¿…é¡»æ”¯æŒå‘å‰å…¼å®¹ï¼ˆæ–°ä»£ç è¯»æ—§æ•°æ®ï¼‰
- åºåˆ—åŒ–è¦æ±‚ï¼š
  - âœ… ä½¿ç”¨ JSON ä½œä¸ºé»˜è®¤æ ¼å¼
  - âœ… å¿½ç•¥æœªçŸ¥å­—æ®µï¼ˆååºåˆ—åŒ–æ—¶ï¼‰
  - âœ… ä¸ºæ–°å­—æ®µæä¾›é»˜è®¤å€¼
  - âŒ ç¦æ­¢é‡åˆ°æœªçŸ¥å­—æ®µæŠ›å‡ºå¼‚å¸¸

**åˆ¤å®š**ï¼š
- âŒ ååºåˆ—åŒ–é‡åˆ°æœªçŸ¥å­—æ®µæŠ›å‡ºå¼‚å¸¸
- âŒ æ–°å­—æ®µæ— é»˜è®¤å€¼å¯¼è‡´ååºåˆ—åŒ–å¤±è´¥
- âœ… åºåˆ—åŒ–æ”¯æŒå‘å‰å…¼å®¹

---

---

### ADR-210_6ï¼šç‰ˆæœ¬å¼‚å¸¸å®¹é”™æœºåˆ¶ï¼ˆRuleï¼‰

#### ADR-210_6_1 ç‰ˆæœ¬å¼‚å¸¸é™çº§å¤„ç†è¦æ±‚

**è§„åˆ™**ï¼š
- ç‰ˆæœ¬å¼‚å¸¸å¿…é¡»é™çº§å¤„ç†ï¼Œä¸å¾—ä¸­æ–­æ¶ˆè´¹
- å®¹é”™ç­–ç•¥ï¼š
  - âœ… æœªè¯†åˆ« SchemaVersion â†’ Warning + Fallback Handler
  - âœ… ååºåˆ—åŒ–å¤±è´¥ â†’ Error + æ­»ä¿¡é˜Ÿåˆ—
  - âœ… è¯­ä¹‰ä¸å…¼å®¹ â†’ Warning + æ—§ç‰ˆæœ¬é€»è¾‘
  - âŒ ç¦æ­¢å› ç‰ˆæœ¬å¼‚å¸¸åœæ­¢æ¶ˆè´¹è€…

**ç”Ÿäº§åŸåˆ™**ï¼š
- äº‹ä»¶ç³»ç»Ÿç¬¬ä¸€åŸåˆ™ï¼š**ä¸æ­»**
- ç‰ˆæœ¬é”™è¯¯æ˜¯æ•°æ®é—®é¢˜ï¼Œä¸æ˜¯ç³»ç»Ÿæ•…éšœ
- ç³»ç»Ÿå¿…é¡»åœ¨ç‰ˆæœ¬å¼‚å¸¸æ—¶ç»§ç»­è¿è¡Œ

**åˆ¤å®š**ï¼š
- âŒ ç‰ˆæœ¬å¼‚å¸¸å¯¼è‡´æ¶ˆè´¹è€…åœæ­¢
- âŒ ç‰ˆæœ¬å¼‚å¸¸ç›´æ¥æŠ›å‡ºæœªå¤„ç†
- âœ… ç‰ˆæœ¬å¼‚å¸¸é™çº§å¤„ç†å¹¶è®°å½•æ—¥å¿—
- âœ… ç³»ç»Ÿåœ¨ç‰ˆæœ¬å¼‚å¸¸æ—¶ç»§ç»­è¿è¡Œ

---

---

## Enforcementï¼ˆæ‰§æ³•æ¨¡å‹ï¼‰

> ğŸ“‹ **Enforcement æ˜ å°„è¯´æ˜**ï¼š
> 
> ä¸‹è¡¨å±•ç¤ºäº† ADR-210 å„æ¡æ¬¾ï¼ˆClauseï¼‰çš„æ‰§æ³•æ–¹å¼åŠæ‰§è¡Œçº§åˆ«ã€‚

| è§„åˆ™ç¼–å· | æ‰§è¡Œçº§ | æ‰§æ³•æ–¹å¼ | Decision æ˜ å°„ |
|---------|--------|---------|--------------|
| **ADR-210_1_1** | L1 | ArchitectureTests è‡ªåŠ¨åŒ–éªŒè¯ | Â§ADR-210_1_1 ç ´åæ€§å˜æ›´å®šä¹‰ |
| **ADR-210_2_1** | L1 | ArchitectureTests è‡ªåŠ¨åŒ–éªŒè¯ | Â§ADR-210_2_1 SchemaVersion å±æ€§å¼ºåˆ¶è¦æ±‚ |
| **ADR-210_3_1** | L1 | ArchitectureTests è‡ªåŠ¨åŒ–éªŒè¯ | Â§ADR-210_3_1 æ—§ç‰ˆæœ¬ä¿ç•™å‘¨æœŸè¦æ±‚ |
| **ADR-210_4_1** | L1 | ArchitectureTests è‡ªåŠ¨åŒ–éªŒè¯ | Â§ADR-210_4_1 è®¢é˜…è€…å¤šç‰ˆæœ¬å¤„ç†è¦æ±‚ |
| **ADR-210_5_1** | L1 | ArchitectureTests è‡ªåŠ¨åŒ–éªŒè¯ | Â§ADR-210_5_1 åºåˆ—åŒ–å‘å‰å…¼å®¹è¦æ±‚ |
| **ADR-210_6_1** | L1 | ArchitectureTests è‡ªåŠ¨åŒ–éªŒè¯ + è¿è¡Œæ—¶ç›‘æ§ | Â§ADR-210_6_1 ç‰ˆæœ¬å¼‚å¸¸é™çº§å¤„ç†è¦æ±‚ |

### æ‰§è¡Œçº§åˆ«è¯´æ˜
- **L1ï¼ˆé˜»æ–­çº§ï¼‰**ï¼šè¿è§„ç›´æ¥å¯¼è‡´ CI å¤±è´¥ã€é˜»æ­¢åˆå¹¶/éƒ¨ç½²
- **L2ï¼ˆè­¦å‘Šçº§ï¼‰**ï¼šè¿è§„è®°å½•å‘Šè­¦ï¼Œéœ€äººå·¥ Code Review è£å†³
- **L3ï¼ˆäººå·¥çº§ï¼‰**ï¼šéœ€è¦æ¶æ„å¸ˆäººå·¥è£å†³


---
---

## Non-Goalsï¼ˆæ˜ç¡®ä¸ç®¡ä»€ä¹ˆï¼‰

æœ¬ ADR æ˜ç¡®ä¸æ¶‰åŠä»¥ä¸‹å†…å®¹ï¼š

- äº‹ä»¶å­˜å‚¨çš„å…·ä½“å®ç°æŠ€æœ¯ï¼ˆEventStore/SQL/NoSQLï¼‰
- äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰çš„å®Œæ•´å®ç°
- è·¨ç³»ç»Ÿçš„é›†æˆäº‹ä»¶ç‰ˆæœ¬ç®¡ç†ï¼ˆç”±å„ç³»ç»Ÿè‡ªè¡Œå†³ç­–ï¼‰
- äº‹ä»¶çš„ä¸šåŠ¡è¯­ä¹‰æ­£ç¡®æ€§ï¼ˆç”±é¢†åŸŸæ¨¡å‹è´Ÿè´£ï¼‰
- äº‹ä»¶å¤„ç†å™¨çš„å…·ä½“å®ç°é€»è¾‘
- äº‹ä»¶æ€»çº¿çš„é€‰å‹å’Œé…ç½®

---

## Prohibitedï¼ˆç¦æ­¢è¡Œä¸ºï¼‰

ä»¥ä¸‹è¡Œä¸ºæ˜ç¡®ç¦æ­¢ï¼š

- âŒ åœ¨ä¸åˆ›å»ºæ–°ç‰ˆæœ¬çš„æƒ…å†µä¸‹ä¿®æ”¹ç°æœ‰äº‹ä»¶ç»“æ„
- âŒ åˆ é™¤äº‹ä»¶çš„ SchemaVersion å±æ€§
- âŒ åœ¨æœªæ»¡ 2 ä¸ªå¤§ç‰ˆæœ¬å‘¨æœŸæ—¶åˆ é™¤æ—§ç‰ˆæœ¬äº‹ä»¶
- âŒ Event Handler ä»…å¤„ç†æœ€æ–°ç‰ˆæœ¬è€Œå¿½ç•¥æ—§ç‰ˆæœ¬
- âŒ ååºåˆ—åŒ–æ—¶é‡åˆ°æœªçŸ¥å­—æ®µç›´æ¥æŠ›å‡ºå¼‚å¸¸
- âŒ å› ç‰ˆæœ¬å¼‚å¸¸å¯¼è‡´æ•´ä¸ªäº‹ä»¶æ¶ˆè´¹è€…åœæ­¢è¿è¡Œ
- âŒ ä½¿ç”¨éè¯­ä¹‰åŒ–ç‰ˆæœ¬å·æ ¼å¼ï¼ˆå¦‚ v1.0.0.1ï¼‰


---

---

## Relationshipsï¼ˆå…³ç³»å£°æ˜ï¼‰

**ä¾èµ–ï¼ˆDepends Onï¼‰**ï¼š
- [ADR-120ï¼šé¢†åŸŸäº‹ä»¶å‘½åçº¦å®š](../structure/ADR-120-domain-event-naming-convention.md) - äº‹ä»¶ç‰ˆæœ¬åŒ–åŸºäºäº‹ä»¶å‘½åè§„èŒƒ
- [ADR-005ï¼šåº”ç”¨å†…äº¤äº’æ¨¡å‹ä¸æ‰§è¡Œè¾¹ç•Œ](../constitutional/ADR-005-Application-Interaction-Model-Final.md) - äº‹ä»¶ç‰ˆæœ¬åŒ–åŸºäºäº‹ä»¶é©±åŠ¨æ¨¡å¼

**è¢«ä¾èµ–ï¼ˆDepended Byï¼‰**ï¼š
- æ— 

**æ›¿ä»£ï¼ˆSupersedesï¼‰**ï¼š
- æ— 

**è¢«æ›¿ä»£ï¼ˆSuperseded Byï¼‰**ï¼š
- æ— 

**ç›¸å…³ï¼ˆRelatedï¼‰**ï¼š
- [ADR-220ï¼šäº‹ä»¶æ€»çº¿é›†æˆ](./ADR-220-event-bus-integration.md) - äº‹ä»¶åºåˆ—åŒ–å’Œç‰ˆæœ¬åŒ–ç›¸å…³

---

---

## Referencesï¼ˆéè£å†³æ€§å‚è€ƒï¼‰

> **ä»…ä¾›ç†è§£ï¼Œä¸å…·è£å†³åŠ›ã€‚**

### ç›¸å…³ ADR
- [ADR-001ï¼šæ¨¡å—åŒ–å•ä½“ä¸å‚ç›´åˆ‡ç‰‡æ¶æ„](../constitutional/ADR-001-modular-monolith-vertical-slice-architecture.md)
- [ADR-120ï¼šé¢†åŸŸäº‹ä»¶å‘½åè§„èŒƒ](../structure/ADR-120-domain-event-naming-convention.md)
- [ADR-220ï¼šäº‹ä»¶æ€»çº¿é›†æˆè§„èŒƒ](ADR-220-event-bus-integration.md)

### æŠ€æœ¯èµ„æº
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [JSON Schema æ–‡æ¡£](https://json-schema.org/)

### å®è·µæŒ‡å¯¼
- äº‹ä»¶ç‰ˆæœ¬åŒ–è¯¦ç»†ç¤ºä¾‹å‚è§ `docs/copilot/adr-210.prompts.md`

---

---

## Historyï¼ˆç‰ˆæœ¬å†å²ï¼‰

| ç‰ˆæœ¬  | æ—¥æœŸ         | å˜æ›´è¯´æ˜   |
|-----|------------|--------|
| 4.0 | 2026-02-06 | å¯¹é½ ADR-907-A v2.0 æ ‡å‡†ï¼šè½¬æ¢ä¸º Rule/Clause åŒå±‚ç¼–å·ä½“ç³»ï¼Œè¡¥å……å®Œæ•´ Enforcement æ˜ å°„è¡¨ã€Non-Goals å’Œ Prohibited ç« èŠ‚ |
| 3.0 | 2026-02-06 | è¡¥å……éƒ¨åˆ† Rule/Clause ç»“æ„ |
| 2.0 | 2026-01-30 | è¡¥å……ç‰ˆæœ¬å¼‚å¸¸å®¹é”™æœºåˆ¶ |
| 1.0 | 2026-01-29 | åˆå§‹ç‰ˆæœ¬ |
