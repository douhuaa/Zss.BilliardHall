# 无人自助台球系统 PRD（产品需求文档）

## 版本信息

- 文档版本：v0.1 (骨架)
- 产品版本目标：V0.1 ~ V1.0 渐进式
- 作者：Auto Generated
- 最近更新：2025-09-21

## 1. 背景与商业目标

### 1.1 行业背景

台球作为大众休闲运动，市场规模逐年增长，但传统场馆运营依赖人工，效率低且易出错。随着移动支付和智能设备普及，具备无人自助运营能力的台球系统有望提升用户体验和运营效率，降低人力成本，实现数据驱动的精细化管理和增值服务。

### 1.2 现存问题

- 人力成本高，传统前台核销/计费效率低
- 账目不透明，缺少经营数据支撑决策
- 利用率低峰谷差大，缺乏动态定价与营销
- 设备维护滞后，无预警与预测能力

### 1.3 解决方案概述

构建“硬件 + 云 SaaS + 数据智能”无人运营系统，实现无人开台、自动计费、运营数据化、智能维护、增值转化。

### 1.4 商业目标（第一年）

| 指标 | 目标 | 说明 |
|------|------|------|
| 单店平均球台数覆盖 | > 20 台 | 适配中大型场馆 |
| 单台日均利用率 | ≥ 35% | 初期提升空间 |
| 人力节省 | ≥ 50% | 收银/巡视岗位减少 |
| 设备在线率 | ≥ 99% | 心跳与故障闭环 |
| D30 留存 | ≥ 30% | 会员+套餐拉动 |
| 套餐收入占比 | ≥ 25% | 增强复购 |

## 2. 用户与角色

（详见 [产品故事](../product-story.md) 可引用，本节给结构化摘要）

- 用户分层：临时用户 / 练习型 / 会员 / 新手
- 运营：场馆管理员 / 财务 / 区域督导
- 运维：设备维护员 / 风控
- 增值：市场推广 / 合作方 / 数据分析师 / AI 模块

## 3. 用户旅程

概要阶段：发现 → 到店 → 扫码 → 选择模式 → 开台 → 使用中 → 结束 → 支付 → 复购激励。

（详细泳道图见 [流程与状态](../design/flow-and-states.md)）

## 4. 功能范围与优先级

### 4.1 功能矩阵（Moscow）

| 模块 | Must | Should | Could | Won't (本阶段) |
|------|------|-------|-------|----------------|
| 开关台/预约 | 开台/关台/预约 | 预约冲突检测 | 上锁容错 | 远期批量排期 |
| 计时计费 | 基础时长/分段 | 分摊支付 | 动态定价 | AI 最优定价 |
| 支付结算 | 微信/支付宝 | 套餐抵扣 | 多方分账 | 加密货币 |
| 会员套餐 | 折扣/套餐 | 连续打卡奖励 | 行为分层权益 | 深度积分商城 |
| 营销活动 | 首单优惠/时段折扣 | 满减/拉新裂变 | 推荐奖励算法 | 复杂联盟联动 |
| 设备管理 | 状态看板/心跳 | 批量操作 | 预测性维护 | 自动订货 |
| 告警与风控 | 离线/忘关灯 | 异常占台 | 逃费识别 | 姿势违规判罚 |
| 工单 | 手动创建/流转 | SLA 计时 | 智能派单 | 自动闭环评价AI |
| 数据报表 | 日营收/利用率 | 用户分群 | LTV 预测 | 全链路归因模型 |
| AI/增值 | （留空） | 姿势初级反馈 | 训练报告 | 战术模拟/VR |

### 4.2 MVP 范围（详表）

下表列出 MVP（V0.1 ~ V0.3 逐步交付）核心功能单元，来源于 Product Story 的用户故事与能力地图；列出是否纳入 MVP、目标版本、成功度量及关键约束。V0.1 聚焦"开台→计费→支付→关台"闭环与基础数据可追溯；V0.2 补全预约/套餐/告警工单；V0.3 引入分摊支付、多门店隔离与基础营销。

| 模块 | 功能 / 用户故事摘要 | 用户价值 | MVP 纳入 | 目标版本 | 成功指标 / 度量 | 关键约束 / 说明 | 前置依赖 |
|------|---------------------|----------|----------|----------|------------------|------------------|-----------|
| 开台 | 扫码即时开台 | 秒级使用，无需人工 | Yes | V0.1 | 首次扫码→开台转化率 | 台状态 Idle 校验 + 幂等 | 球台状态机 |
| 开台 | 匿名 5 分钟体验 | 试用降低注册门槛 | Yes | V0.1 | 匿名→注册转化≥60% | 每设备/账号频次限制 | 账号/风控基础 |
| 会话 | 实时计时与费用展示 | 费用透明减少不信任 | Yes | V0.1 | 计费投诉率≈0 | 单一固定单价 | 计费引擎简版 |
| 计费 | 结束冻结金额 | 明确应付，防价格漂移 | Yes | V0.1 | 冻结金额=最终金额 100% | 无优惠叠加 | 会话时长精度 |
| 支付 | 微信支付（主渠道） | 闭环营收 | Yes | V0.1 | 支付成功率≥98% | Sandbox→正式切换 | 支付网关集成 |
| 设备 | 灯控开关反馈 | 无人化闭环 | Yes | V0.1 | 灯控成功率≥99% | 指令重试策略 | 设备接口 |
| 设备 | 心跳采集 | 在线监测 | Yes | V0.1 | 心跳覆盖率 | 仅记录不告警 | 设备端SDK |
| 埋点 | 核心 P0 事件 | 数据可追溯 | Yes | V0.1 | P0 事件缺失 <5% | 统一Track接口 | event_log 表 |
| 预约 | 预约创建/过期释放 | 保证高峰资源 | Yes | V0.2 | 预约使用率≥30% | 冲突检测窗口锁 | 定时任务/会话绑定 |
| 预约 | 预约转开台 | 体验连贯 | Yes | V0.2 | 转化正确率100% | 绑定 reservation_id | 预约数据完整 |
| 套餐 | 分钟套餐抵扣 | 降成本促进复购 | Yes | V0.2 | 套餐抵扣占比10~15% | 先抵扣分钟策略 | membership/套餐库存 |
| 会员 | 折扣（等级） | 促进留存 | Yes | V0.2 | 会员渗透率 | 固定折扣表 | 用户体系 |
| 告警 | 心跳缺失/长时间未关台 | 保障设备利用 | Yes | V0.2 | 告警→工单生成<60s | 简单规则（阈值） | 心跳数据可用 |
| 工单 | 手动创建/状态流转 | 运维闭环 | Yes | V0.2 | MTTA/MTTR 可计算 | 无智能派单 | 告警记录 |
| 支付 | 分摊（均分/按时长） | 多人公平支付 | Yes | V0.3 | 分摊使用率≥10% | 份额超时兜底 | 会话参与记录 |
| 营销 | 首单优惠 | 拉新转化 | Yes | V0.3 | 首单优惠触达≥80% | 单次判定逻辑 | 支付/用户首单判定 |
| 定价 | 时段折扣 | 错峰利用 | Yes | V0.3 | 高峰前后利用率差缩小 | 规则优先序 | pricing_rule 扩展 |
| 多门店 | Store 权限隔离 | 可复制扩张 | Yes | V0.3 | 越权事件=0 | RBAC 过滤所有查询 | 用户-门店映射 |
| 分析 | 日报（营收/利用率） | 运营洞察 | Yes | V0.2 | 日报出具准时率 | 简单聚合脚本 | 事件/会话数据完整 |
| 风控 | 简单逃费判定（结束/灯灭差） | 收入保护 | Maybe | V0.3 | 逃费追回率（定义中） | 仅规则，无模型 | 事件时序准确 |
| AI 增值 | 姿势初级反馈占位 | 长期差异化准备 | No (占位) | 后续 | - | 仅预留埋点 | 视频/模型链路 |

注：MVP 判定遵循“闭环 + 可度量 + 可扩展”原则；表中 Maybe 表示若资源允许在该版本尾部插入，否则延后。

补充说明：

- 计费解释性：V0.x 阶段金额 = 基础分钟 * 单价（+时段折扣/首单优惠/套餐抵扣/会员折扣按既定顺序叠加，顺序在计费快照 `rule_applied` 中固化）。
- 并发与幂等：开台（session_token）、支付回调（channel_txn_id）、套餐扣减（乐观锁）均需在技术设计中明确。
- 数据质量：P0 事件（会话、支付、心跳）必须在 24h 内通过校对脚本与业务表对账（缺失补发或告警）。

## 5. 业务流程描述

- 开台流程
- 预约流程
- 关台与计费流程
- 支付与对账流程
- 告警与工单流程

（图与状态转换详见 [流程与状态](../design/flow-and-states.md)）

## 6. 实施与版本路线参考

详细的分阶段目标、退出标准与风险缓解见 [实施路线图](../implementation-roadmap.md)。本 PRD 不重复列出执行维度，仅保留需求视角；当需求范围调整时需同步更新路线图以保持一致性。
