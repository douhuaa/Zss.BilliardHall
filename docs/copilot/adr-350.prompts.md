# ADR-350 Copilot 提示词

**版本**：2.0  
**创建日期**：2026-01-24  
**更新日期**：2026-01-25  
**ADR**: docs/adr/technical/ADR-350-logging-observability-standards.md

---

## 核心升级：L1 强制规则

### ADR-350.1: CorrelationId 现为 L1（强制）

**推荐方案**：Serilog Enricher 全局注入
```csharp
Log.Logger = new LoggerConfiguration()
    .Enrich.WithCorrelationId()
    .CreateLogger();
```

### ADR-350.4: 异常日志现为 L1（Roslyn Analyzer）

**必须使用**：
```csharp
// ✅ 正确
_logger.LogError(exception, "Failed {OrderId}", orderId);
```

**禁止使用**：
```csharp
// ❌ 错误：缺少 exception
_logger.LogError("Failed {OrderId}", orderId);
```

---

## 必须阻止的反模式

### ❌ 反模式 1：记录敏感信息

```csharp
// ❌ 错误
_logger.LogInformation("Login: {User} {Pass}", user, password);

// ✅ 正确
_logger.LogInformation("Login: {UserId}", userId);
```

### ❌ 反模式 2：snake_case 字段名

```csharp
// ❌ 错误
_logger.LogInformation("{user_id} {order_id}", ...);

// ✅ 正确
_logger.LogInformation("{UserId} {OrderId}", ...);
```

---

## 版本历史

| 版本 | 日期 | 变更说明 |
|-----|------|---------|
| 2.0 | 2026-01-25 | 升级 350.1/350.4 为 L1 |
| 1.0 | 2026-01-24 | 初始版本 |
