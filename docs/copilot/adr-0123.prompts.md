# ADR-0123 Copilot 提示词

**版本**：1.0  
**创建日期**：2026-01-24  
**ADR**: docs/adr/*/ADR-0123-*.md

---

## 何时触发

当开发者进行以下操作时，Copilot 应引用本 ADR：

1. 创建或修改相关组件
2. 违反 ADR 约束时给出警告
3. 架构测试失败需要诊断时
4. Code Review 发现潜在问题时

---

## 必须阻止的反模式

### ❌ 反模式 1：违反核心约束
参考 ADR-0123 正文中的"规则本体"章节

### ❌ 反模式 2：忽略架构测试失败
当 ADR_0123_Architecture_Tests 失败时，必须：
1. 查看测试失败消息
2. 定位违规代码
3. 按 ADR 要求修复
4. 或申请破例并记录

### ❌ 反模式 3：未记录破例
如果确需破例，必须：
1. 在 docs/summaries/arch-violations.md 记录
2. 说明原因和归还计划
3. 获得相应审批

---

## CI 失败诊断

### 测试失败：ADR_0123_Architecture_Tests

**常见原因**：
1. 违反 ADR 命名规范
2. 违反 ADR 依赖约束
3. 违反 ADR 结构要求

**排查步骤**：
1. 查看测试输出的具体错误消息
2. 定位到失败的测试方法
3. 参考 ADR-0123 正文的相应规则
4. 按要求修正代码

---

## 快速参考

详见 ADR-0123 正文的"规则本体"和"执法模型"章节。

---

## 相关资源

- ADR 正文: docs/adr/*/ADR-0123-*.md
- 架构测试: src/tests/ArchitectureTests/ADR/ADR_0123_Architecture_Tests.cs
- 常见问题: docs/copilot/pr-common-issues.prompts.md

---

## 版本历史

| 版本 | 日期 | 变更说明 | 修订人 |
|-----|------|---------|--------|
| 1.0 | 2026-01-24 | 初始版本 | GitHub Copilot |
