# 3. 系统架构设计

本目录包含自助台球系统的架构设计文档，采用 **垂直切片架构** + **Wolverine** + **Marten** 技术栈。

---

## 📚 核心文档

### 🎯 快速开始（推荐阅读顺序）

1. **[Wolverine快速上手指南](./Wolverine快速上手指南.md)** ⭐⭐⭐  
   15分钟上手 Wolverine，包含完整示例代码

2. **[Wolverine模块化架构蓝图](./Wolverine模块化架构蓝图.md)** ⭐⭐⭐  
   可直接落地的实战型架构规划，**必读**  
   **包含内容**：
   - 序章：垂直切片架构理念
   - 完整架构设计与最佳实践
   - 附录 A：Wolverine 框架核心特性详解
   - 附录 B：Wolverine 与 MediatR 深度对比
   - 附录 C：测试支持与最佳实践
   - 附录 D：从 ABP 分层架构迁移指南
   - 附录 E：命名约定与代码组织

3. **[架构决策记录 (ADR)](./ADR/)** 🆕 ⭐⭐  
   关键架构决策的详细推理和权衡分析  
   **包含**：17 个 ADR，涵盖垂直切片、Saga、Handler 规范等核心决策  
   **映射表**：[ADR 与架构蓝图映射表](./ADR与架构蓝图映射表.md)

4. **[系统模块划分](./系统模块划分.md)** ⭐⭐  
   6大核心模块的职责边界与通信规则

### 📖 架构理念

- [架构变更摘要](./架构变更摘要.md) - 从 ABP 到 Wolverine 的演进
- [Wolverine架构变更历史](./Wolverine架构变更历史.md) - 架构蓝图版本演进
- [设计原则](./设计原则.md) - CQRS、DDD Light、消息驱动

### 🛠️ 技术框架

- [Marten数据访问](./Marten数据访问.md) - PostgreSQL 文档存储、事件溯源
- [技术选型](./技术选型.md) - 技术决策背景
- [Aspire编排架构](./Aspire编排架构.md) ⭐ - 服务编排、可观测性

### 🏗️ 系统设计

- [总体架构图](./总体架构图.md) - 逻辑架构、物理部署
- [外部接口](./外部接口.md) - 支付网关、设备 API

---

## 🔗 相关文档

- [04_模块设计](../04_模块设计/) - 各模块的详细设计
- [05_数据库设计](../05_数据库设计/) - Marten 开发工作流程
- [06_开发规范](../06_开发规范/) - 切片约束与代码规范
- [07_API文档](../07_API文档/) - API 接口文档

---

## 📝 文档归并说明

为实施**单一真相源（SSOT）**原则，以下文档已归并到《Wolverine模块化架构蓝图》：

- ~~垂直切片架构说明.md~~ → 归并为蓝图序章
- ~~Wolverine框架介绍.md~~ → 归并为蓝图附录 A-E

详见：[文档瘦身归并建议清单](../文档瘦身归并建议清单.md)

---

## 🧭 文档导航建议

### 场景 1：新人快速上手
1. 阅读《Wolverine快速上手指南》(15 分钟)
2. 阅读《Wolverine模块化架构蓝图》序章（10 分钟）
3. 开始编写第一个 Handler

### 场景 2：理解架构决策
1. 阅读《Wolverine模块化架构蓝图》全文
2. 针对关键决策点，查阅对应 ADR（详见映射表）
3. 重点阅读：ADR-001, ADR-004, ADR-007, ADR-010

### 场景 3：日常开发疑问
- 代码放 BuildingBlocks？→ [ADR-004](./ADR/ADR-004-BuildingBlocks准入标准.md)
- 何时用 Saga？→ [ADR-007](./ADR/ADR-007-Saga使用三条铁律.md)
- Handler 太长？→ [ADR-010](./ADR/ADR-010-Handler行数限制.md)
- 跨服务通信？→ [ADR-006](./ADR/ADR-006-InvokeAsync使用限制.md)

---

**最后更新**: 2026-01-19  
**状态**: ✅ 已审核  
**文档归并**: ✅ v1.3.0（2026-01-13）  
**ADR 拆分**: ✅ v1.4.0（2026-01-19）
